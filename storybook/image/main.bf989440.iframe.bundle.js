(self.webpackChunkng_easy=self.webpackChunkng_easy||[]).push([[179],{24038:module=>{function webpackEmptyAsyncContext(req){return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}))}webpackEmptyAsyncContext.keys=()=>[],webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext,webpackEmptyAsyncContext.id=24038,module.exports=webpackEmptyAsyncContext},63168:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./image-list.component.stories.ts":32125,"./image.component.stories.ts":70356};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=63168},89037:module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id=89037,module.exports=webpackEmptyContext},32491:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function dedupAndSortImageSizes(imageSizes){return[...new Set([...imageSizes])].sort(((a,b)=>a-b))}var ImageFormat;__webpack_require__.d(__webpack_exports__,{D3:()=>ImageFormat,_l:()=>dedupAndSortImageSizes,CC:()=>defaultImageOptimizerConfig,zo:()=>getImageFormat,V9:()=>getImageMimeType}),function(ImageFormat){ImageFormat.Png="png",ImageFormat.Jpeg="jpeg",ImageFormat.Webp="webp",ImageFormat.Avif="avif",ImageFormat.Heif="heif"}(ImageFormat||(ImageFormat={}));const imageFormatRegexMap=Object.values(ImageFormat).reduce(((map,format)=>(map[format]=format===ImageFormat.Jpeg?/\.jpe?g$/i:new RegExp(`\\.${format}$`,"i"),map)),{});function getImageFormat(src){for(const format in imageFormatRegexMap){if(imageFormatRegexMap[format].test(src))return format}throw new Error(`Image with src "${src}" has an unknown extension.`)}const imageTypeMap=Object.values(ImageFormat).reduce(((map,format)=>(map[format]=`image/${format}`,map)),{});function getImageMimeType(srcOrFormat){if(imageTypeMap[srcOrFormat])return imageTypeMap[srcOrFormat];const format=getImageFormat(srcOrFormat);return imageTypeMap[format]}const defaultImageOptimizerConfig={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],quality:{"slow-2g":30,"2g":40,"3g":50,"4g":75,saveData:40,default:75},formats:[ImageFormat.Jpeg,ImageFormat.Webp]}},45367:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{c:()=>ImageComponent});var models_namespaceObject={};__webpack_require__.r(models_namespaceObject);var _a,_b,_c,_d,_e,_f,_g,_h,_j,tslib_es6=__webpack_require__(70655),core=__webpack_require__(35752),platform_browser=__webpack_require__(45284),Subject=__webpack_require__(54236),startWith=__webpack_require__(91414),map=__webpack_require__(10047),switchMap=__webpack_require__(7425),services=__webpack_require__(67319);let ImageComponent=class ImageComponent{constructor(imageLoader,window,domSanitizer,elementRef,intersection){this.imageLoader=imageLoader,this.window=window,this.domSanitizer=domSanitizer,this.elementRef=elementRef,this.intersection=intersection,this.src="",this.alt="",this.layout="intrinsic",this.sizes="100vw",this.priority=!1,this.placeholder="empty",this.unoptimized=!1,this.objectFit="cover",this.objectPosition="50% 50%",this.loadingComplete=new core.EventEmitter,this.ngOnChanges$=new Subject.xQ,this.changes$=this.ngOnChanges$.pipe((0,startWith.O)(void 0)),this.sizerSvg$=this.changes$.pipe((0,map.U)((()=>{if("intrinsic"!==this.layout)return null;const sizerSvg=this.window.btoa(`<svg width="${this.width}" height="${this.height}" xmlns="http://www.w3.org/2000/svg" version="1.1"/>`);return this.domSanitizer.bypassSecurityTrustUrl(`data:image/svg+xml;base64,${sizerSvg}`)}))),this.sources$=this.changes$.pipe((0,map.U)((()=>this.imageLoader.getImageSources({src:this.src,width:this.width,layout:this.layout,sizes:this.sizes,unoptimized:this.unoptimized})))),this.blurBackgroundImage$=this.changes$.pipe((0,map.U)((()=>"blur"===this.placeholder?this.blurDataURL?`url("${this.blurDataURL}")`:`url("${this.imageLoader.getPlaceholderSrc(this.src)}")`:"none"))),this.isVisible$=this.changes$.pipe((0,switchMap.w)((()=>this.intersection.isVisible(this.elementRef.nativeElement,this.priority)))),this.isImageLoaded=!1}get loading(){return this.priority?"eager":"lazy"}get showSizer(){return"intrinsic"===this.layout||"responsive"===this.layout}get sizeRatio(){return null==this.height||null==this.width?0:this.height/this.width}get sizerPaddingTop(){return"responsive"===this.layout?100*this.sizeRatio+"%":"auto"}get wrapperWidth(){var _a;return"fixed"===this.layout?`${null!==(_a=this.width)&&void 0!==_a?_a:0}px`:"auto"}get wrapperHeight(){var _a;return"fixed"===this.layout?`${null!==(_a=this.height)&&void 0!==_a?_a:0}px`:"auto"}get blurFilter(){return"blur"===this.placeholder&&this.blurDataURL&&!this.isImageLoaded?"blur(20px)":"none"}ngOnChanges(){this.validateInputs(),this.ngOnChanges$.next()}ngAfterViewInit(){var _a;(null===(_a=this.image)||void 0===_a?void 0:_a.nativeElement.complete)&&this.onLoad()}getImageMime(_,{mimeType:mime}){return mime}onLoad(){if(!this.image)return;if(!this.image.nativeElement.src.startsWith("data:")){("decode"in this.image.nativeElement?this.image.nativeElement.decode():Promise.resolve()).catch((()=>null)).then((()=>{this.isImageLoaded=!0,this.loadingComplete.emit()}))}if(!(0,core.isDevMode)()||"intrinsic"!==this.layout)return;const{naturalWidth,naturalHeight}=this.image.nativeElement;null!=this.width&&this.width!=naturalWidth&&console.warn(`Image with src "${this.src}" should have "width" of ${naturalWidth}.`),null!=this.height&&this.height!=naturalHeight&&console.warn(`Image with src "${this.src}" should have "height" of ${naturalHeight}.`)}validateInputs(){var _a,_b;if(this.src.startsWith("data:")&&(this.unoptimized=!0,this.priority=!1),"fill"!==this.layout&&(null==this.width||null==this.height||this.width<=0||this.height<=0))throw new Error(`Image with src "${this.src}" must use "width" and "height" properties or "layout='fill'" property.`);(0,core.isDevMode)()&&("fill"!==this.layout||null==this.width&&null==this.height||console.warn(`Image with src "${this.src}" and "layout='fill'" has unused properties assigned. Please remove "width" and "height".`),0===this.alt.trim().length&&console.warn(`Image with src "${this.src}" must use an "alt" property.`),this.unoptimized||this.imageLoader.supportsOptimization||console.warn(`Image with src "${this.src}" uses a loader that does not implement width. Please implement it or use the "unoptimized" property instead.`),"blur"===this.placeholder&&("fill"!==this.layout&&(null!==(_a=this.width)&&void 0!==_a?_a:0)*(null!==(_b=this.height)&&void 0!==_b?_b:0)<1600&&console.warn(`Image with src "${this.src}" is smaller than 40x40. Consider removing the "placeholder='blur'" property to improve performance.`),this.blurDataURL||this.imageLoader.supportsOptimization||console.warn(`Image with src "${this.src}" has "placeholder='blur'" property but is missing the "blurDataURL" property. Placeholder could be fetched from the loader, but it doesn't support optimization. Please implement it, or pass an inline "blurDataURL".`)))}};(0,tslib_es6.gn)([(0,core.ViewChild)("image",{static:!1}),(0,tslib_es6.w6)("design:type","function"==typeof(_a=void 0!==core.ElementRef&&core.ElementRef)?_a:Object)],ImageComponent.prototype,"image",void 0),(0,tslib_es6.gn)([(0,core.Input)(),(0,tslib_es6.w6)("design:type",Object)],ImageComponent.prototype,"src",void 0),(0,tslib_es6.gn)([(0,core.Input)(),(0,tslib_es6.w6)("design:type",Object)],ImageComponent.prototype,"alt",void 0),(0,tslib_es6.gn)([(0,core.Input)(),(0,tslib_es6.w6)("design:type",Number)],ImageComponent.prototype,"width",void 0),(0,tslib_es6.gn)([(0,core.Input)(),(0,tslib_es6.w6)("design:type",Number)],ImageComponent.prototype,"height",void 0),(0,tslib_es6.gn)([(0,core.Input)(),(0,tslib_es6.w6)("design:type","function"==typeof(_b=void 0!==models_namespaceObject.ImageLayout&&models_namespaceObject.ImageLayout)?_b:Object)],ImageComponent.prototype,"layout",void 0),(0,tslib_es6.gn)([(0,core.Input)(),(0,tslib_es6.w6)("design:type",Object)],ImageComponent.prototype,"sizes",void 0),(0,tslib_es6.gn)([(0,core.Input)(),(0,tslib_es6.w6)("design:type",Object)],ImageComponent.prototype,"priority",void 0),(0,tslib_es6.gn)([(0,core.Input)(),(0,tslib_es6.w6)("design:type","function"==typeof(_c=void 0!==models_namespaceObject.ImagePlaceholder&&models_namespaceObject.ImagePlaceholder)?_c:Object)],ImageComponent.prototype,"placeholder",void 0),(0,tslib_es6.gn)([(0,core.Input)(),(0,tslib_es6.w6)("design:type",String)],ImageComponent.prototype,"blurDataURL",void 0),(0,tslib_es6.gn)([(0,core.Input)(),(0,tslib_es6.w6)("design:type",Object)],ImageComponent.prototype,"unoptimized",void 0),(0,tslib_es6.gn)([(0,core.Input)(),(0,tslib_es6.w6)("design:type","function"==typeof(_d=void 0!==models_namespaceObject.ObjectFit&&models_namespaceObject.ObjectFit)?_d:Object)],ImageComponent.prototype,"objectFit",void 0),(0,tslib_es6.gn)([(0,core.Input)(),(0,tslib_es6.w6)("design:type",Object)],ImageComponent.prototype,"objectPosition",void 0),(0,tslib_es6.gn)([(0,core.Output)(),(0,tslib_es6.w6)("design:type",Object)],ImageComponent.prototype,"loadingComplete",void 0),ImageComponent=(0,tslib_es6.gn)([(0,core.Component)({selector:"image[src]",template:(__webpack_require__(21118).default||__webpack_require__(21118)).length?__webpack_require__(21118).default||__webpack_require__(21118):"",styles:[(__webpack_require__(14909).default||__webpack_require__(14909)).length?__webpack_require__(14909).default||__webpack_require__(14909):""],changeDetection:core.ChangeDetectionStrategy.OnPush}),(0,tslib_es6.w6)("design:paramtypes",["function"==typeof(_e=void 0!==services.S3&&services.S3)?_e:Object,"function"==typeof(_f="undefined"!=typeof Window&&Window)?_f:Object,"function"==typeof(_g=void 0!==platform_browser.DomSanitizer&&platform_browser.DomSanitizer)?_g:Object,"function"==typeof(_h=void 0!==core.ElementRef&&core.ElementRef)?_h:Object,"function"==typeof(_j=void 0!==services.sF&&services.sF)?_j:Object])],ImageComponent)},58017:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$:()=>ImageModule});var ImageModule_1,tslib__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(70655),_angular_common__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(54265),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(35752),_ng_easy_image_config__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(32491),_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(45367),_services__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(67319),_tokens__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(56025);let ImageModule=ImageModule_1=class ImageModule{static forRoot({imageOptimizerConfig}){return{ngModule:ImageModule_1,providers:[{provide:_services__WEBPACK_IMPORTED_MODULE_2__.S3,useClass:_services__WEBPACK_IMPORTED_MODULE_2__.KT},{provide:_tokens__WEBPACK_IMPORTED_MODULE_3__.z,useValue:null!=imageOptimizerConfig?imageOptimizerConfig:_ng_easy_image_config__WEBPACK_IMPORTED_MODULE_0__.CC},{provide:Window,useValue:window}]}}};ImageModule=ImageModule_1=(0,tslib__WEBPACK_IMPORTED_MODULE_4__.gn)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_5__.NgModule)({declarations:[_component__WEBPACK_IMPORTED_MODULE_1__.c],imports:[_angular_common__WEBPACK_IMPORTED_MODULE_6__.ez],exports:[_component__WEBPACK_IMPORTED_MODULE_1__.c]})],ImageModule)},67319:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{KT:()=>DefaultImageLoader,sF:()=>ImageIntersectionObserver,S3:()=>ImageLoader});var _a,tslib_es6=__webpack_require__(70655),core=__webpack_require__(35752),Subject=__webpack_require__(54236),of=__webpack_require__(30223),defer=__webpack_require__(8744),takeUntil=__webpack_require__(78210),delay=__webpack_require__(5714),map=__webpack_require__(10047),distinctUntilChanged=__webpack_require__(71785),tap=__webpack_require__(22690),finalize=__webpack_require__(47819);let ImageIntersectionObserver=class ImageIntersectionObserver{constructor(appRef){var _a;this.appRef=appRef,this.browserSupportsLazyLoading="loading"in HTMLImageElement.prototype,this.intersections$=new Subject.xQ,this.intersectionObserver=new IntersectionObserver((entries=>{this.intersections$.next(entries)}),{root:null===(_a=this.appRef.components[0])||void 0===_a?void 0:_a.location.nativeElement})}isVisible(element,priority){if(this.browserSupportsLazyLoading||priority)return(0,of.of)(!0);const complete$=new Subject.xQ;return(0,defer.P)((()=>(this.intersectionObserver.observe(element),this.intersections$))).pipe((0,takeUntil.R)(complete$.pipe((0,delay.g)(0))),(0,map.U)((entries=>{var _a;const entry=entries.find((entry=>entry.target===element));return null!==(_a=null==entry?void 0:entry.isIntersecting)&&void 0!==_a&&_a})),(0,distinctUntilChanged.x)(),(0,tap.b)((visible=>{visible&&(complete$.next(),complete$.complete())})),(0,finalize.x)((()=>this.intersectionObserver.unobserve(element))))}};ImageIntersectionObserver=(0,tslib_es6.gn)([(0,core.Injectable)({providedIn:"root"}),(0,tslib_es6.w6)("design:paramtypes",["function"==typeof(_a=void 0!==core.ApplicationRef&&core.ApplicationRef)?_a:Object])],ImageIntersectionObserver);var image_config_src=__webpack_require__(32491);var image_loader_a,tokens=__webpack_require__(56025);const viewportWidthRe=/(^|\s)(1?\d?\d)vw/g,preferredOptimizedFormats=[image_config_src.D3.Webp,image_config_src.D3.Avif,image_config_src.D3.Heif,image_config_src.D3.Jpeg],randomWidth=Math.floor(1e3*Math.random())+100;let ImageLoader=class ImageLoader{constructor(imageOptimizerConfig){this.imageOptimizerConfig=imageOptimizerConfig,this.allSizes=(0,image_config_src._l)([...this.imageOptimizerConfig.deviceSizes,...this.imageOptimizerConfig.imageSizes]),this.deviceSizes=(0,image_config_src._l)(this.imageOptimizerConfig.deviceSizes),this.supportsOptimization=this.getImageUrl({src:"test",width:randomWidth,quality:75,format:image_config_src.D3.Jpeg}).includes(randomWidth.toString());const supportedFormats=new Set([...imageOptimizerConfig.formats,image_config_src.D3.Jpeg]),preferredOptimizedFormat=preferredOptimizedFormats.find((preferredFormat=>supportedFormats.has(preferredFormat)));if(null==preferredOptimizedFormat)throw new Error("There is not a supported preferred image optimizer format.");this.preferredOptimizedFormat=preferredOptimizedFormat}getImageSources({src,width,layout,sizes,unoptimized}){if(unoptimized)return[{src,sizes:"",srcset:"",mimeType:(0,image_config_src.V9)(src)}];const{widths,kind}=this.getWidths(width,layout,sizes),lastWidthIndex=widths.length-1,quality=function getQuality(configQuality){if("number"==typeof configQuality)return configQuality;if(!("connection"in window.navigator))return configQuality.default;const connection=window.navigator.connection;if(connection.saveData)return configQuality.saveData;switch(connection.effectiveType){case"slow-2g":return configQuality["slow-2g"];case"2g":return configQuality["2g"];case"3g":return configQuality["3g"];case"4g":return configQuality["4g"]}}(this.imageOptimizerConfig.quality);return this.getImageOptimizedFormats(src,unoptimized).map((format=>({sizes:sizes||"w"!==kind?sizes:"100vw",srcset:widths.map(((width,index)=>`${this.getImageUrl({src,quality,width,format})} ${"w"===kind?width:index+1}${kind}`)).join(", "),src:this.getImageUrl({src,quality,width:widths[lastWidthIndex],format}),mimeType:(0,image_config_src.V9)(format)})))}getPlaceholderSrc(src){return this.getImageUrl({src,quality:15,width:15,format:this.preferredOptimizedFormat})}getImageOptimizedFormats(src,unoptimized){const format=(0,image_config_src.zo)(src);return format===image_config_src.D3.Png?[image_config_src.D3.Png]:unoptimized?[format]:[...new Set([this.preferredOptimizedFormat,image_config_src.D3.Jpeg])]}getWidths(width,layout,sizes){if(sizes&&("fill"===layout||"responsive"===layout)){const percentSizes=[];for(let match;match=viewportWidthRe.exec(sizes);match)percentSizes.push(parseInt(match[2]));if(percentSizes.length){const smallestRatio=.01*Math.min(...percentSizes);return{widths:this.allSizes.filter((size=>size>=this.deviceSizes[0]*smallestRatio)),kind:"w"}}return{widths:[...this.allSizes],kind:"w"}}if(null==width||"fill"===layout||"responsive"===layout)return{widths:[...this.deviceSizes],kind:"w"};return{widths:[...new Set([width,2*width].map((w=>this.allSizes.find((p=>p>=w))||this.allSizes[this.allSizes.length-1])))],kind:"x"}}};ImageLoader=(0,tslib_es6.gn)([(0,tslib_es6.fM)(0,(0,core.Inject)(tokens.z)),(0,tslib_es6.w6)("design:paramtypes",["function"==typeof(image_loader_a=void 0!==image_config_src.ImageOptimizerConfig&&image_config_src.ImageOptimizerConfig)?image_loader_a:Object])],ImageLoader);let DefaultImageLoader=class DefaultImageLoader extends ImageLoader{getImageUrl({src,width,quality,format}){return`${src}?w=${width}&q=${quality}&fm=${format}`}};DefaultImageLoader=(0,tslib_es6.gn)([(0,core.Injectable)()],DefaultImageLoader)},56025:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{z:()=>IMAGE_OPTIMIZER_CONFIG});const IMAGE_OPTIMIZER_CONFIG=new(__webpack_require__(35752).InjectionToken)("@ng-easy/image:image-optimizer-config")},32125:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__,Example:()=>Example});var tslib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(70655),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(35752),_storybook_angular__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(70001),_image_module__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(58017);let ImageListComponent=class ImageListComponent{};ImageListComponent=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.gn)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.Component)({template:'\n    <h2><code>layout="fixed"</code></h2>\n    <image\n      src="https://assets.imgix.net/unsplash/bear.jpg"\n      alt="Bear"\n      [width]="1080"\n      [height]="720"\n      layout="fixed"\n      placeholder="blur"\n    ></image>\n\n    <h2><code>layout="intrinsic"</code></h2>\n    <image\n      src="https://assets.imgix.net/examples/kingfisher.jpg"\n      alt="Kingfisher"\n      [width]="3840"\n      [height]="2560"\n      layout="intrinsic"\n      placeholder="blur"\n    ></image>\n\n    <h2><code>layout="responsive"</code></h2>\n    <image\n      src="https://assets.imgix.net/unsplash/transport.jpg"\n      alt="Transport"\n      [width]="3600"\n      [height]="2400"\n      layout="responsive"\n      placeholder="blur"\n    ></image>\n\n    <h2><code>layout="fill"</code></h2>\n    <div style="width: 100%; height: 250px; position: relative">\n      <image src="https://assets.imgix.net/unsplash/bridge.jpg" alt="Bridge" layout="fill" placeholder="blur"></image>\n    </div>\n  ',changeDetection:_angular_core__WEBPACK_IMPORTED_MODULE_3__.ChangeDetectionStrategy.OnPush})],ImageListComponent);let ImageListModule=class ImageListModule{};ImageListModule=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.gn)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.NgModule)({imports:[_image_module__WEBPACK_IMPORTED_MODULE_1__.$],declarations:[ImageListComponent],exports:[ImageListComponent]})],ImageListModule);const __WEBPACK_DEFAULT_EXPORT__={title:"Image",component:ImageListComponent,decorators:[(0,_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.moduleMetadata)({imports:[_image_module__WEBPACK_IMPORTED_MODULE_1__.$.forRoot({}),ImageListModule]})],parameters:{controls:{include:[]}}},Example=(args=>({component:ImageListComponent,props:args})).bind({});Example.args={},Example.parameters=Object.assign({storySource:{source:"(args: ImageListComponent) => ({\n  component: ImageListComponent,\n  props: args,\n})"}},Example.parameters)},70356:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__,Intrinsic:()=>Intrinsic,Fixed:()=>Fixed,Responsive:()=>Responsive,Fill:()=>Fill});var _storybook_angular__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(70001),_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(45367),_image_module__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(58017);const __WEBPACK_DEFAULT_EXPORT__={title:"Image/ImageComponent",component:_component__WEBPACK_IMPORTED_MODULE_1__.c,decorators:[(0,_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.moduleMetadata)({imports:[_image_module__WEBPACK_IMPORTED_MODULE_2__.$.forRoot({})]})],parameters:{controls:{include:["src","alt","width","height","layout","sizes","priority","placeholder","blurDataURL","unoptimized","objectFit","objectPosition","loadingComplete"]}},args:{src:"https://assets.imgix.net/unsplash/bear.jpg",alt:"Bear",width:1080,height:720,placeholder:"blur"},argTypes:{src:{},width:{},height:{},layout:{control:{type:"select"},table:{defaultValue:{summary:"intrinsic"}}},sizes:{},placeholder:{control:{type:"select"},table:{defaultValue:{summary:"empty"}}},blurDataURL:{},unoptimized:{table:{defaultValue:{summary:!1}}},priority:{table:{defaultValue:{summary:!1}}},objectFit:{control:{type:"select"},table:{defaultValue:{summary:"cover"}}},objectPosition:{table:{defaultValue:{summary:"50% 50%"}}}}},Template=args=>({component:_component__WEBPACK_IMPORTED_MODULE_1__.c,props:args}),Intrinsic=Template.bind({});Intrinsic.args={};const Fixed=Template.bind({});Fixed.args={layout:"fixed"};const Responsive=Template.bind({});Responsive.args={layout:"responsive"};const Fill=Template.bind({});Fill.args={layout:"fill",width:void 0,height:void 0},Intrinsic.parameters=Object.assign({storySource:{source:"(args: ImageComponent) => ({\n  component: ImageComponent,\n  props: args,\n})"}},Intrinsic.parameters),Fixed.parameters=Object.assign({storySource:{source:"(args: ImageComponent) => ({\n  component: ImageComponent,\n  props: args,\n})"}},Fixed.parameters),Responsive.parameters=Object.assign({storySource:{source:"(args: ImageComponent) => ({\n  component: ImageComponent,\n  props: args,\n})"}},Responsive.parameters),Fill.parameters=Object.assign({storySource:{source:"(args: ImageComponent) => ({\n  component: ImageComponent,\n  props: args,\n})"}},Fill.parameters)},11417:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module=__webpack_require__.nmd(module),(0,__webpack_require__(70001).configure)([__webpack_require__(89037),__webpack_require__(63168)],module,!1)},31809:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,{parameters:()=>parameters});__webpack_require__(47941),__webpack_require__(82526),__webpack_require__(57327),__webpack_require__(38880),__webpack_require__(89554),__webpack_require__(54747),__webpack_require__(49337),__webpack_require__(33321),__webpack_require__(69070);var client_api=__webpack_require__(78880),esm=__webpack_require__(23827),angular=__webpack_require__(83156);const documentation_namespaceObject=JSON.parse('{"pipes":[],"interfaces":[{"name":"ImageModuleConfig","id":"interface-ImageModuleConfig-052fa6c11601e6b93afea584050a2f50","file":"src/lib/image.module.ts","deprecated":false,"deprecationMessage":"","type":"interface","sourceCode":"import { CommonModule } from \'@angular/common\';\\nimport { ModuleWithProviders, NgModule } from \'@angular/core\';\\n\\nimport { defaultImageOptimizerConfig, ImageOptimizerConfig } from \'@ng-easy/image-config\';\\n\\nimport { ImageComponent } from \'./component\';\\nimport { DefaultImageLoader, ImageLoader } from \'./services\';\\nimport { IMAGE_OPTIMIZER_CONFIG } from \'./tokens\';\\n\\nexport interface ImageModuleConfig {\\n  imageOptimizerConfig?: ImageOptimizerConfig;\\n}\\n\\n@NgModule({\\n  declarations: [ImageComponent],\\n  imports: [CommonModule],\\n  exports: [ImageComponent],\\n})\\nexport class ImageModule {\\n  static forRoot({ imageOptimizerConfig }: ImageModuleConfig): ModuleWithProviders<ImageModule> {\\n    return {\\n      ngModule: ImageModule,\\n      providers: [\\n        { provide: ImageLoader, useClass: DefaultImageLoader },\\n        { provide: IMAGE_OPTIMIZER_CONFIG, useValue: imageOptimizerConfig ?? defaultImageOptimizerConfig },\\n        { provide: Window, useValue: window },\\n      ],\\n    };\\n  }\\n}\\n","properties":[{"name":"imageOptimizerConfig","deprecated":false,"deprecationMessage":"","type":"ImageOptimizerConfig","optional":true,"description":"","line":11}],"indexSignatures":[],"kind":163,"methods":[]},{"name":"ImageSources","id":"interface-ImageSources-2c0d21e56cfc407fd3f5a1647f30fe28","file":"src/lib/models/image-sources.ts","deprecated":false,"deprecationMessage":"","type":"interface","sourceCode":"import { ImageMimeType } from \'@ng-easy/image-config\';\\n\\nexport interface ImageSources {\\n  srcset: string;\\n  sizes: string;\\n  src: string;\\n  mimeType: ImageMimeType;\\n}\\n","properties":[{"name":"mimeType","deprecated":false,"deprecationMessage":"","type":"ImageMimeType","optional":false,"description":"","line":7},{"name":"sizes","deprecated":false,"deprecationMessage":"","type":"string","optional":false,"description":"","line":5},{"name":"src","deprecated":false,"deprecationMessage":"","type":"string","optional":false,"description":"","line":6},{"name":"srcset","deprecated":false,"deprecationMessage":"","type":"string","optional":false,"description":"","line":4}],"indexSignatures":[],"kind":163,"methods":[]},{"name":"ImageSourcesOptions","id":"interface-ImageSourcesOptions-a2208fbf5fb1bfb2e50fb2fc3344230d","file":"src/lib/models/image-sources-options.ts","deprecated":false,"deprecationMessage":"","type":"interface","sourceCode":"import { ImageLayout } from \'./image-layout\';\\n\\nexport interface ImageSourcesOptions {\\n  src: string;\\n  width: number | undefined;\\n  layout: ImageLayout;\\n  sizes: string;\\n  unoptimized: boolean;\\n}\\n","properties":[{"name":"layout","deprecated":false,"deprecationMessage":"","type":"ImageLayout","optional":false,"description":"","line":6},{"name":"sizes","deprecated":false,"deprecationMessage":"","type":"string","optional":false,"description":"","line":7},{"name":"src","deprecated":false,"deprecationMessage":"","type":"string","optional":false,"description":"","line":4},{"name":"unoptimized","deprecated":false,"deprecationMessage":"","type":"boolean","optional":false,"description":"","line":8},{"name":"width","deprecated":false,"deprecationMessage":"","type":"number | undefined","optional":false,"description":"","line":5}],"indexSignatures":[],"kind":163,"methods":[]},{"name":"ImageUrlOptions","id":"interface-ImageUrlOptions-1ca15ad0b8e669cf46673604d5a91afb","file":"src/lib/models/image-url-options.ts","deprecated":false,"deprecationMessage":"","type":"interface","sourceCode":"import { ImageFormat } from \'@ng-easy/image-config\';\\n\\nexport interface ImageUrlOptions {\\n  src: string;\\n  width: number;\\n  quality: number;\\n  format: ImageFormat;\\n}\\n","properties":[{"name":"format","deprecated":false,"deprecationMessage":"","type":"ImageFormat","optional":false,"description":"","line":7},{"name":"quality","deprecated":false,"deprecationMessage":"","type":"number","optional":false,"description":"","line":6},{"name":"src","deprecated":false,"deprecationMessage":"","type":"string","optional":false,"description":"","line":4},{"name":"width","deprecated":false,"deprecationMessage":"","type":"number","optional":false,"description":"","line":5}],"indexSignatures":[],"kind":163,"methods":[]}],"injectables":[{"name":"DefaultImageLoader","id":"injectable-DefaultImageLoader-415ecc8a3719013d9410f3f7da6059c4","file":"src/lib/services/image-loader.ts","properties":[{"name":"supportsOptimization","defaultValue":"this.getImageUrl({\\n    src: \'test\',\\n    width: randomWidth,\\n    quality: 75,\\n    format: ImageFormat.Jpeg,\\n  }).includes(randomWidth.toString())","deprecated":false,"deprecationMessage":"","type":"boolean","optional":false,"description":"","line":26,"modifierKind":[142],"inheritance":{"file":"ImageLoader"}}],"methods":[{"name":"getImageUrl","args":[{"type":"ImageUrlOptions","deprecated":false,"deprecationMessage":""}],"optional":false,"returnType":"string","typeParameters":[],"line":128,"deprecated":false,"deprecationMessage":"","jsdoctags":[{"type":"ImageUrlOptions","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}}],"inheritance":{"file":"ImageLoader"}},{"name":"getImageSources","args":[{"type":"ImageSourcesOptions","deprecated":false,"deprecationMessage":""}],"optional":false,"returnType":"ImageSources[]","typeParameters":[],"line":46,"deprecated":false,"deprecationMessage":"","jsdoctags":[{"type":"ImageSourcesOptions","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}}],"inheritance":{"file":"ImageLoader"}},{"name":"getPlaceholderSrc","args":[{"name":"src","type":"string","deprecated":false,"deprecationMessage":""}],"optional":false,"returnType":"string","typeParameters":[],"line":66,"deprecated":false,"deprecationMessage":"","jsdoctags":[{"name":"src","type":"string","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}}],"inheritance":{"file":"ImageLoader"}}],"deprecated":false,"deprecationMessage":"","description":"","rawdescription":"\\n","sourceCode":"import { Inject, Injectable } from \'@angular/core\';\\n\\nimport { ImageFormat, dedupAndSortImageSizes, getImageFormat, ImageOptimizerConfig, getImageMimeType } from \'@ng-easy/image-config\';\\n\\nimport { getQuality } from \'../functions\';\\nimport { ImageUrlOptions, ImageSourcesOptions, ImageSources, ImageLayout } from \'../models\';\\nimport { IMAGE_OPTIMIZER_CONFIG } from \'../tokens\';\\n\\nconst viewportWidthRe = /(^|\\\\s)(1?\\\\d?\\\\d)vw/g;\\nconst preferredOptimizedFormats: readonly ImageFormat[] = [ImageFormat.Webp, ImageFormat.Avif, ImageFormat.Heif, ImageFormat.Jpeg] as const;\\nconst placeholderQuality = 15;\\nconst placeholderWidth = 15;\\nconst randomWidth: number = Math.floor(Math.random() * 1000) + 100;\\n\\n/**\\n * Provider that resolves image URLs.\\n */\\nexport abstract class ImageLoader {\\n  private readonly allSizes: readonly number[] = dedupAndSortImageSizes([\\n    ...this.imageOptimizerConfig.deviceSizes,\\n    ...this.imageOptimizerConfig.imageSizes,\\n  ]);\\n  private readonly deviceSizes: readonly number[] = dedupAndSortImageSizes(this.imageOptimizerConfig.deviceSizes);\\n  private readonly preferredOptimizedFormat: ImageFormat;\\n\\n  readonly supportsOptimization: boolean = this.getImageUrl({\\n    src: \'test\',\\n    width: randomWidth,\\n    quality: 75,\\n    format: ImageFormat.Jpeg,\\n  }).includes(randomWidth.toString());\\n\\n  constructor(@Inject(IMAGE_OPTIMIZER_CONFIG) protected readonly imageOptimizerConfig: ImageOptimizerConfig) {\\n    const supportedFormats: Set<ImageFormat> = new Set([...imageOptimizerConfig.formats, ImageFormat.Jpeg]);\\n    const preferredOptimizedFormat: ImageFormat | undefined = preferredOptimizedFormats.find((preferredFormat) =>\\n      supportedFormats.has(preferredFormat)\\n    );\\n    if (preferredOptimizedFormat == null) {\\n      throw new Error(`There is not a supported preferred image optimizer format.`);\\n    }\\n    this.preferredOptimizedFormat = preferredOptimizedFormat;\\n  }\\n\\n  abstract getImageUrl(options: ImageUrlOptions): string;\\n\\n  getImageSources({ src, width, layout, sizes, unoptimized }: ImageSourcesOptions): ImageSources[] {\\n    if (unoptimized) {\\n      return [{ src, sizes: \'\', srcset: \'\', mimeType: getImageMimeType(src) }];\\n    }\\n\\n    const { widths, kind } = this.getWidths(width, layout, sizes);\\n    const lastWidthIndex: number = widths.length - 1;\\n    const quality: number = getQuality(this.imageOptimizerConfig.quality);\\n\\n    return this.getImageOptimizedFormats(src, unoptimized).map((format) => ({\\n      sizes: !sizes && kind === \'w\' ? \'100vw\' : sizes,\\n      srcset: widths\\n        .map((width, index) => `${this.getImageUrl({ src, quality, width, format })} ${kind === \'w\' ? width : index + 1}${kind}`)\\n        .join(\', \'),\\n      src: this.getImageUrl({ src, quality, width: widths[lastWidthIndex], format }),\\n      mimeType: getImageMimeType(format),\\n    }));\\n  }\\n\\n  // TODO: use jpg format instead of preferredOptimizedFormat\\n  getPlaceholderSrc(src: string): string {\\n    return this.getImageUrl({\\n      src,\\n      quality: placeholderQuality,\\n      width: placeholderWidth,\\n      format: this.preferredOptimizedFormat,\\n    });\\n  }\\n\\n  private getImageOptimizedFormats(src: string, unoptimized: boolean): ImageFormat[] {\\n    const format: ImageFormat = getImageFormat(src);\\n\\n    if (format === ImageFormat.Png) {\\n      return [ImageFormat.Png];\\n    } else if (unoptimized) {\\n      return [format];\\n    } else {\\n      return [...new Set([this.preferredOptimizedFormat, ImageFormat.Jpeg])];\\n    }\\n  }\\n\\n  private getWidths(width: number | undefined, layout: ImageLayout, sizes: string): { widths: number[]; kind: \'w\' | \'x\' } {\\n    if (sizes && (layout === \'fill\' || layout === \'responsive\')) {\\n      // Find all the \\"vw\\" percent sizes used in the sizes prop\\n      const percentSizes: number[] = [];\\n      for (let match; (match = viewportWidthRe.exec(sizes)); match) {\\n        percentSizes.push(parseInt(match[2]));\\n      }\\n\\n      if (percentSizes.length) {\\n        const smallestRatio: number = Math.min(...percentSizes) * 0.01;\\n        return {\\n          widths: this.allSizes.filter((size: number) => size >= this.deviceSizes[0] * smallestRatio),\\n          kind: \'w\',\\n        };\\n      }\\n      return { widths: [...this.allSizes], kind: \'w\' };\\n    }\\n\\n    if (width == null || layout === \'fill\' || layout === \'responsive\') {\\n      return { widths: [...this.deviceSizes], kind: \'w\' };\\n    }\\n\\n    const widths: number[] = [\\n      ...new Set(\\n        // > This means that most OLED screens that say they are 3x resolution,\\n        // > are actually 3x in the green color, but only 1.5x in the red and\\n        // > blue colors. Showing a 3x resolution image in the app vs a 2x\\n        // > resolution image will be visually the same, though the 3x image\\n        // > takes significantly more data. Even true 3x resolution screens are\\n        // > wasteful as the human eye cannot see that level of detail without\\n        // > something like a magnifying glass.\\n        // https://blog.twitter.com/engineering/en_us/topics/infrastructure/2019/capping-image-fidelity-on-ultra-high-resolution-devices.html\\n        [width, width * 2].map((w) => this.allSizes.find((p) => p >= w) || this.allSizes[this.allSizes.length - 1])\\n      ),\\n    ];\\n    return { widths, kind: \'x\' };\\n  }\\n}\\n\\n@Injectable()\\nexport class DefaultImageLoader extends ImageLoader {\\n  getImageUrl({ src, width, quality, format }: ImageUrlOptions) {\\n    return `${src}?w=${width}&q=${quality}&fm=${format}`;\\n  }\\n}\\n","extends":"ImageLoader","type":"injectable"},{"name":"ImageIntersectionObserver","id":"injectable-ImageIntersectionObserver-7a619bb77a2732d54a3ef9ab3ccf24b1","file":"src/lib/services/image-intersection-observer.service.ts","properties":[],"methods":[{"name":"isVisible","args":[{"name":"element","type":"Element","deprecated":false,"deprecationMessage":""},{"name":"priority","type":"boolean","deprecated":false,"deprecationMessage":""}],"optional":false,"returnType":"Observable<boolean>","typeParameters":[],"line":22,"deprecated":false,"deprecationMessage":"","jsdoctags":[{"name":"element","type":"Element","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}},{"name":"priority","type":"boolean","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}}]}],"deprecated":false,"deprecationMessage":"","description":"","rawdescription":"\\n","sourceCode":"import { ApplicationRef, Injectable } from \'@angular/core\';\\nimport { defer, Observable, of, Subject } from \'rxjs\';\\nimport { delay, distinctUntilChanged, finalize, map, takeUntil, tap } from \'rxjs/operators\';\\n\\n// Reference: https://web.dev/browser-level-image-lazy-loading\\n@Injectable({ providedIn: \'root\' })\\nexport class ImageIntersectionObserver {\\n  private readonly browserSupportsLazyLoading: boolean = \'loading\' in HTMLImageElement.prototype;\\n  private readonly intersections$ = new Subject<IntersectionObserverEntry[]>();\\n  private readonly intersectionObserver = new IntersectionObserver(\\n    (entries) => {\\n      this.intersections$.next(entries);\\n    },\\n    {\\n      // TODO: tweak distances\\n      root: this.appRef.components[0]?.location.nativeElement,\\n    }\\n  );\\n\\n  constructor(private readonly appRef: ApplicationRef) {}\\n\\n  isVisible(element: Element, priority: boolean): Observable<boolean> {\\n    if (this.browserSupportsLazyLoading || priority) {\\n      return of(true);\\n    }\\n\\n    const complete$ = new Subject<void>();\\n    return defer(() => {\\n      this.intersectionObserver.observe(element);\\n      return this.intersections$;\\n    }).pipe(\\n      takeUntil(complete$.pipe(delay(0))),\\n      map((entries: IntersectionObserverEntry[]) => {\\n        const entry: IntersectionObserverEntry | undefined = entries.find((entry) => entry.target === element);\\n        return entry?.isIntersecting ?? false;\\n      }),\\n      distinctUntilChanged(),\\n      tap((visible) => {\\n        if (visible) {\\n          complete$.next();\\n          complete$.complete();\\n        }\\n      }),\\n      finalize(() => this.intersectionObserver.unobserve(element))\\n    );\\n  }\\n}\\n","constructorObj":{"name":"constructor","description":"","deprecated":false,"deprecationMessage":"","args":[{"name":"appRef","type":"ApplicationRef","deprecated":false,"deprecationMessage":""}],"line":18,"jsdoctags":[{"name":"appRef","type":"ApplicationRef","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}}]},"type":"injectable"}],"guards":[],"interceptors":[],"classes":[{"name":"ImageLoader","id":"class-ImageLoader-415ecc8a3719013d9410f3f7da6059c4","file":"src/lib/services/image-loader.ts","deprecated":false,"deprecationMessage":"","type":"class","sourceCode":"import { Inject, Injectable } from \'@angular/core\';\\n\\nimport { ImageFormat, dedupAndSortImageSizes, getImageFormat, ImageOptimizerConfig, getImageMimeType } from \'@ng-easy/image-config\';\\n\\nimport { getQuality } from \'../functions\';\\nimport { ImageUrlOptions, ImageSourcesOptions, ImageSources, ImageLayout } from \'../models\';\\nimport { IMAGE_OPTIMIZER_CONFIG } from \'../tokens\';\\n\\nconst viewportWidthRe = /(^|\\\\s)(1?\\\\d?\\\\d)vw/g;\\nconst preferredOptimizedFormats: readonly ImageFormat[] = [ImageFormat.Webp, ImageFormat.Avif, ImageFormat.Heif, ImageFormat.Jpeg] as const;\\nconst placeholderQuality = 15;\\nconst placeholderWidth = 15;\\nconst randomWidth: number = Math.floor(Math.random() * 1000) + 100;\\n\\n/**\\n * Provider that resolves image URLs.\\n */\\nexport abstract class ImageLoader {\\n  private readonly allSizes: readonly number[] = dedupAndSortImageSizes([\\n    ...this.imageOptimizerConfig.deviceSizes,\\n    ...this.imageOptimizerConfig.imageSizes,\\n  ]);\\n  private readonly deviceSizes: readonly number[] = dedupAndSortImageSizes(this.imageOptimizerConfig.deviceSizes);\\n  private readonly preferredOptimizedFormat: ImageFormat;\\n\\n  readonly supportsOptimization: boolean = this.getImageUrl({\\n    src: \'test\',\\n    width: randomWidth,\\n    quality: 75,\\n    format: ImageFormat.Jpeg,\\n  }).includes(randomWidth.toString());\\n\\n  constructor(@Inject(IMAGE_OPTIMIZER_CONFIG) protected readonly imageOptimizerConfig: ImageOptimizerConfig) {\\n    const supportedFormats: Set<ImageFormat> = new Set([...imageOptimizerConfig.formats, ImageFormat.Jpeg]);\\n    const preferredOptimizedFormat: ImageFormat | undefined = preferredOptimizedFormats.find((preferredFormat) =>\\n      supportedFormats.has(preferredFormat)\\n    );\\n    if (preferredOptimizedFormat == null) {\\n      throw new Error(`There is not a supported preferred image optimizer format.`);\\n    }\\n    this.preferredOptimizedFormat = preferredOptimizedFormat;\\n  }\\n\\n  abstract getImageUrl(options: ImageUrlOptions): string;\\n\\n  getImageSources({ src, width, layout, sizes, unoptimized }: ImageSourcesOptions): ImageSources[] {\\n    if (unoptimized) {\\n      return [{ src, sizes: \'\', srcset: \'\', mimeType: getImageMimeType(src) }];\\n    }\\n\\n    const { widths, kind } = this.getWidths(width, layout, sizes);\\n    const lastWidthIndex: number = widths.length - 1;\\n    const quality: number = getQuality(this.imageOptimizerConfig.quality);\\n\\n    return this.getImageOptimizedFormats(src, unoptimized).map((format) => ({\\n      sizes: !sizes && kind === \'w\' ? \'100vw\' : sizes,\\n      srcset: widths\\n        .map((width, index) => `${this.getImageUrl({ src, quality, width, format })} ${kind === \'w\' ? width : index + 1}${kind}`)\\n        .join(\', \'),\\n      src: this.getImageUrl({ src, quality, width: widths[lastWidthIndex], format }),\\n      mimeType: getImageMimeType(format),\\n    }));\\n  }\\n\\n  // TODO: use jpg format instead of preferredOptimizedFormat\\n  getPlaceholderSrc(src: string): string {\\n    return this.getImageUrl({\\n      src,\\n      quality: placeholderQuality,\\n      width: placeholderWidth,\\n      format: this.preferredOptimizedFormat,\\n    });\\n  }\\n\\n  private getImageOptimizedFormats(src: string, unoptimized: boolean): ImageFormat[] {\\n    const format: ImageFormat = getImageFormat(src);\\n\\n    if (format === ImageFormat.Png) {\\n      return [ImageFormat.Png];\\n    } else if (unoptimized) {\\n      return [format];\\n    } else {\\n      return [...new Set([this.preferredOptimizedFormat, ImageFormat.Jpeg])];\\n    }\\n  }\\n\\n  private getWidths(width: number | undefined, layout: ImageLayout, sizes: string): { widths: number[]; kind: \'w\' | \'x\' } {\\n    if (sizes && (layout === \'fill\' || layout === \'responsive\')) {\\n      // Find all the \\"vw\\" percent sizes used in the sizes prop\\n      const percentSizes: number[] = [];\\n      for (let match; (match = viewportWidthRe.exec(sizes)); match) {\\n        percentSizes.push(parseInt(match[2]));\\n      }\\n\\n      if (percentSizes.length) {\\n        const smallestRatio: number = Math.min(...percentSizes) * 0.01;\\n        return {\\n          widths: this.allSizes.filter((size: number) => size >= this.deviceSizes[0] * smallestRatio),\\n          kind: \'w\',\\n        };\\n      }\\n      return { widths: [...this.allSizes], kind: \'w\' };\\n    }\\n\\n    if (width == null || layout === \'fill\' || layout === \'responsive\') {\\n      return { widths: [...this.deviceSizes], kind: \'w\' };\\n    }\\n\\n    const widths: number[] = [\\n      ...new Set(\\n        // > This means that most OLED screens that say they are 3x resolution,\\n        // > are actually 3x in the green color, but only 1.5x in the red and\\n        // > blue colors. Showing a 3x resolution image in the app vs a 2x\\n        // > resolution image will be visually the same, though the 3x image\\n        // > takes significantly more data. Even true 3x resolution screens are\\n        // > wasteful as the human eye cannot see that level of detail without\\n        // > something like a magnifying glass.\\n        // https://blog.twitter.com/engineering/en_us/topics/infrastructure/2019/capping-image-fidelity-on-ultra-high-resolution-devices.html\\n        [width, width * 2].map((w) => this.allSizes.find((p) => p >= w) || this.allSizes[this.allSizes.length - 1])\\n      ),\\n    ];\\n    return { widths, kind: \'x\' };\\n  }\\n}\\n\\n@Injectable()\\nexport class DefaultImageLoader extends ImageLoader {\\n  getImageUrl({ src, width, quality, format }: ImageUrlOptions) {\\n    return `${src}?w=${width}&q=${quality}&fm=${format}`;\\n  }\\n}\\n","constructorObj":{"name":"constructor","description":"","deprecated":false,"deprecationMessage":"","args":[{"name":"imageOptimizerConfig","type":"ImageOptimizerConfig","deprecated":false,"deprecationMessage":""}],"line":31,"jsdoctags":[{"name":"imageOptimizerConfig","type":"ImageOptimizerConfig","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}}]},"properties":[{"name":"supportsOptimization","defaultValue":"this.getImageUrl({\\n    src: \'test\',\\n    width: randomWidth,\\n    quality: 75,\\n    format: ImageFormat.Jpeg,\\n  }).includes(randomWidth.toString())","deprecated":false,"deprecationMessage":"","type":"boolean","optional":false,"description":"","line":26,"modifierKind":[142]}],"description":"<p>Provider that resolves image URLs.</p>\\n","rawdescription":"\\n\\nProvider that resolves image URLs.\\n","methods":[{"name":"getImageSources","args":[{"type":"ImageSourcesOptions","deprecated":false,"deprecationMessage":""}],"optional":false,"returnType":"ImageSources[]","typeParameters":[],"line":46,"deprecated":false,"deprecationMessage":"","jsdoctags":[{"type":"ImageSourcesOptions","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}}]},{"name":"getImageUrl","args":[{"name":"options","type":"ImageUrlOptions","deprecated":false,"deprecationMessage":""}],"optional":false,"returnType":"string","typeParameters":[],"line":44,"deprecated":false,"deprecationMessage":"","modifierKind":[125],"jsdoctags":[{"name":"options","type":"ImageUrlOptions","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}}]},{"name":"getPlaceholderSrc","args":[{"name":"src","type":"string","deprecated":false,"deprecationMessage":""}],"optional":false,"returnType":"string","typeParameters":[],"line":66,"deprecated":false,"deprecationMessage":"","jsdoctags":[{"name":"src","type":"string","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}}]}],"indexSignatures":[],"inputsClass":[],"outputsClass":[],"hostBindings":[],"hostListeners":[]}],"directives":[],"components":[{"name":"ImageComponent","id":"component-ImageComponent-3657cf117604a7ba180055010ee87b4a","file":"src/lib/component/image.component.ts","changeDetection":"ChangeDetectionStrategy.OnPush","encapsulation":[],"entryComponents":[],"inputs":[],"outputs":[],"providers":[],"selector":"image[src]","styleUrls":["image.component.scss"],"styles":[],"templateUrl":["image.component.html"],"viewProviders":[],"inputsClass":[{"name":"alt","defaultValue":"\'\'","deprecated":false,"deprecationMessage":"","rawdescription":"The `alt` attribute provides alternative information for an image if a user for some reason cannot view it\\n(because of slow connection, an error in the src attribute, or if the user uses a screen reader).","description":"<p>The <code>alt</code> attribute provides alternative information for an image if a user for some reason cannot view it\\n(because of slow connection, an error in the src attribute, or if the user uses a screen reader).</p>\\n","line":38,"type":"string"},{"name":"blurDataURL","deprecated":false,"deprecationMessage":"","rawdescription":"A Data URL to be used as a placeholder image before the `src` image successfully loads. Only takes effect when combined with `placeholder=\\"blur\\"`.\\nMust be a base64-encoded image. It will be enlarged and blurred, so a very small image (10px or less) is recommended. Including larger images as placeholders may harm your application performance.\\n\\nIf not provided inline and the loader supports optimization a small placeholder will be fetched automatically.","description":"<p>A Data URL to be used as a placeholder image before the <code>src</code> image successfully loads. Only takes effect when combined with <code>placeholder=&quot;blur&quot;</code>.\\nMust be a base64-encoded image. It will be enlarged and blurred, so a very small image (10px or less) is recommended. Including larger images as placeholders may harm your application performance.</p>\\n<p>If not provided inline and the loader supports optimization a small placeholder will be fetched automatically.</p>\\n","line":93,"type":"string"},{"name":"height","deprecated":false,"deprecationMessage":"","rawdescription":"The height of the image, in pixels. Must be an integer without a unit.\\nRequired, except for those with `layout=\\"fill\\"`.\\nTODO: accept string","description":"<p>The height of the image, in pixels. Must be an integer without a unit.\\nRequired, except for those with <code>layout=&quot;fill&quot;</code>.\\nTODO: accept string</p>\\n","line":52,"type":"number"},{"name":"layout","defaultValue":"\'intrinsic\'","deprecated":false,"deprecationMessage":"","rawdescription":"The layout behavior of the image as the viewport changes size. Defaults to `intrinsic`.\\n\\n* When `fixed,` the image dimensions will not change as the viewport changes (no responsiveness) similar to the native img element.\\n* When `intrinsic`, the image will scale the dimensions down for smaller viewports but maintain the original dimensions for larger viewports.\\n* When `responsive`, the image will scale the dimensions down for smaller viewports and scale up for larger viewports.\\n* When `fill`, the image will stretch both width and height to the dimensions of the parent element, provided the parent element is relative. This is usually paired with the objectFit property.","description":"<p>The layout behavior of the image as the viewport changes size. Defaults to <code>intrinsic</code>.</p>\\n<ul>\\n<li>When <code>fixed,</code> the image dimensions will not change as the viewport changes (no responsiveness) similar to the native img element.</li>\\n<li>When <code>intrinsic</code>, the image will scale the dimensions down for smaller viewports but maintain the original dimensions for larger viewports.</li>\\n<li>When <code>responsive</code>, the image will scale the dimensions down for smaller viewports and scale up for larger viewports.</li>\\n<li>When <code>fill</code>, the image will stretch both width and height to the dimensions of the parent element, provided the parent element is relative. This is usually paired with the objectFit property.</li>\\n</ul>\\n","line":62,"type":"ImageLayout"},{"name":"objectFit","defaultValue":"\'cover\'","deprecated":false,"deprecationMessage":"","rawdescription":"The image fit when using `layout=\\"fill\\"`.","description":"<p>The image fit when using <code>layout=&quot;fill&quot;</code>.</p>\\n","line":103,"type":"ObjectFit"},{"name":"objectPosition","defaultValue":"\'50% 50%\'","deprecated":false,"deprecationMessage":"","rawdescription":"The image fit when using `layout=\\"fill\\"`.","description":"<p>The image fit when using <code>layout=&quot;fill&quot;</code>.</p>\\n","line":108,"type":"string"},{"name":"placeholder","defaultValue":"\'empty\'","deprecated":false,"deprecationMessage":"","rawdescription":"A placeholder to use while the image is loading in base, possible values are blur or empty. Defaults to `empty`.\\n\\nWhen `blur`, the `blurDataURL` property will be used as the placeholder.\\nIf using server-side rendering then `blurDataURL` will automatically be populated.\\n\\nWhen `empty`, there will be no placeholder while the image is loading, only empty space.","description":"<p>A placeholder to use while the image is loading in base, possible values are blur or empty. Defaults to <code>empty</code>.</p>\\n<p>When <code>blur</code>, the <code>blurDataURL</code> property will be used as the placeholder.\\nIf using server-side rendering then <code>blurDataURL</code> will automatically be populated.</p>\\n<p>When <code>empty</code>, there will be no placeholder while the image is loading, only empty space.</p>\\n","line":85,"type":"ImagePlaceholder"},{"name":"priority","defaultValue":"false","deprecated":false,"deprecationMessage":"","rawdescription":"When true, the image will be considered high priority and preload.\\nShould only be used when the image is visible above the fold. Defaults to false.\\nIs used only in server-side rendering.","description":"<p>When true, the image will be considered high priority and preload.\\nShould only be used when the image is visible above the fold. Defaults to false.\\nIs used only in server-side rendering.</p>\\n","line":75,"type":"boolean"},{"name":"sizes","defaultValue":"\'100vw\'","deprecated":false,"deprecationMessage":"","rawdescription":"A string mapping media queries to device sizes. Defaults to `100vw`.\\nWe recommend setting sizes when using `layout=\\"responsive\\"` or `layout=\\"fill\\"` and your image will not be the same width as the viewport.","description":"<p>A string mapping media queries to device sizes. Defaults to <code>100vw</code>.\\nWe recommend setting sizes when using <code>layout=&quot;responsive&quot;</code> or <code>layout=&quot;fill&quot;</code> and your image will not be the same width as the viewport.</p>\\n","line":68,"type":"string"},{"name":"src","defaultValue":"\'\'","deprecated":false,"deprecationMessage":"","rawdescription":"Required, must be a path string. This can be either an absolute external URL, or an internal path depending on the loader.","description":"<p>Required, must be a path string. This can be either an absolute external URL, or an internal path depending on the loader.</p>\\n","line":32,"type":"string"},{"name":"unoptimized","defaultValue":"false","deprecated":false,"deprecationMessage":"","rawdescription":"When true, the source image will be served as-is instead of changing quality, size, or format. Defaults to `false`.","description":"<p>When true, the source image will be served as-is instead of changing quality, size, or format. Defaults to <code>false</code>.</p>\\n","line":98,"type":"boolean"},{"name":"width","deprecated":false,"deprecationMessage":"","rawdescription":"The width of the image, in pixels. Must be an integer without a unit.\\nRequired, except for those with `layout=\\"fill\\"`.\\nTODO: accept string","description":"<p>The width of the image, in pixels. Must be an integer without a unit.\\nRequired, except for those with <code>layout=&quot;fill&quot;</code>.\\nTODO: accept string</p>\\n","line":45,"type":"number"}],"outputsClass":[{"name":"loadingComplete","defaultValue":"new EventEmitter<void>()","deprecated":false,"deprecationMessage":"","rawdescription":"\\n\\nOutput emits once the image is completely loaded and the placeholder has been removed.\\n","description":"<p>Output emits once the image is completely loaded and the placeholder has been removed.</p>\\n","line":113,"type":"EventEmitter"}],"propertiesClass":[{"name":"blurBackgroundImage$","defaultValue":"this.changes$.pipe(\\n    map(() => {\\n      if (this.placeholder === \'blur\') {\\n        return this.blurDataURL ? `url(\\"${this.blurDataURL}\\")` : `url(\\"${this.imageLoader.getPlaceholderSrc(this.src)}\\")`;\\n      } else {\\n        return \'none\';\\n      }\\n    })\\n  )","deprecated":false,"deprecationMessage":"","type":"Observable<string>","optional":false,"description":"","line":178,"modifierKind":[142]},{"name":"image","deprecated":false,"deprecationMessage":"","type":"ElementRef<HTMLImageElement>","optional":true,"description":"","line":27,"decorators":[{"name":"ViewChild","stringifiedArguments":"\'image\', {static: false}"}],"modifierKind":[142]},{"name":"isVisible$","defaultValue":"this.changes$.pipe(\\n    switchMap(() => this.intersection.isVisible(this.elementRef.nativeElement, this.priority))\\n  )","deprecated":false,"deprecationMessage":"","type":"Observable<boolean>","optional":false,"description":"","line":188,"modifierKind":[142]},{"name":"sizerSvg$","defaultValue":"this.changes$.pipe(\\n    map(() => {\\n      if (this.layout !== \'intrinsic\') {\\n        return null;\\n      }\\n\\n      // Create a placeholder svg and convert it to base64\\n      const sizerSvg: string = this.window.btoa(\\n        `<svg width=\\"${this.width}\\" height=\\"${this.height}\\" xmlns=\\"http://www.w3.org/2000/svg\\" version=\\"1.1\\"/>`\\n      );\\n\\n      return this.domSanitizer.bypassSecurityTrustUrl(`data:image/svg+xml;base64,${sizerSvg}`);\\n    })\\n  )","deprecated":false,"deprecationMessage":"","type":"Observable<SafeUrl | null>","optional":false,"description":"","line":150,"modifierKind":[142]},{"name":"sources$","defaultValue":"this.changes$.pipe(\\n    map(() =>\\n      this.imageLoader.getImageSources({\\n        src: this.src,\\n        width: this.width,\\n        layout: this.layout,\\n        sizes: this.sizes,\\n        unoptimized: this.unoptimized,\\n      })\\n    )\\n  )","deprecated":false,"deprecationMessage":"","type":"Observable<ImageSources[]>","optional":false,"description":"","line":166,"modifierKind":[142]}],"methodsClass":[{"name":"getImageMime","args":[{"name":"_","type":"number","deprecated":false,"deprecationMessage":""},{"type":"ImageSources","deprecated":false,"deprecationMessage":""}],"optional":false,"returnType":"any","typeParameters":[],"line":214,"deprecated":false,"deprecationMessage":"","jsdoctags":[{"name":"_","type":"number","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}},{"type":"ImageSources","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}}]},{"name":"onLoad","args":[],"optional":false,"returnType":"void","typeParameters":[],"line":219,"deprecated":false,"deprecationMessage":""}],"deprecated":false,"deprecationMessage":"","hostBindings":[],"hostListeners":[],"description":"","rawdescription":"\\n","type":"component","sourceCode":"import {\\n  Component,\\n  ChangeDetectionStrategy,\\n  Input,\\n  Output,\\n  EventEmitter,\\n  OnChanges,\\n  isDevMode,\\n  AfterViewInit,\\n  ViewChild,\\n  ElementRef,\\n} from \'@angular/core\';\\nimport { DomSanitizer, SafeUrl } from \'@angular/platform-browser\';\\nimport { Observable, Subject } from \'rxjs\';\\nimport { map, startWith, switchMap } from \'rxjs/operators\';\\n\\nimport { ImageLayout, ImagePlaceholder, ObjectFit, ImageSources } from \'../models\';\\nimport { ImageIntersectionObserver, ImageLoader } from \'../services\';\\n\\n@Component({\\n  selector: \'image[src]\',\\n  templateUrl: \'image.component.html\',\\n  styleUrls: [\'image.component.scss\'],\\n  changeDetection: ChangeDetectionStrategy.OnPush,\\n})\\nexport class ImageComponent implements OnChanges, AfterViewInit {\\n  @ViewChild(\'image\', { static: false }) readonly image?: ElementRef<HTMLImageElement>;\\n\\n  /**\\n   * Required, must be a path string. This can be either an absolute external URL, or an internal path depending on the loader.\\n   */\\n  @Input() src = \'\';\\n\\n  /**\\n   * The `alt` attribute provides alternative information for an image if a user for some reason cannot view it\\n   * (because of slow connection, an error in the src attribute, or if the user uses a screen reader).\\n   */\\n  @Input() alt = \'\';\\n\\n  /**\\n   * The width of the image, in pixels. Must be an integer without a unit.\\n   * Required, except for those with `layout=\\"fill\\"`.\\n   * TODO: accept string\\n   */\\n  @Input() width?: number;\\n\\n  /**\\n   * The height of the image, in pixels. Must be an integer without a unit.\\n   * Required, except for those with `layout=\\"fill\\"`.\\n   * TODO: accept string\\n   */\\n  @Input() height?: number;\\n\\n  /**\\n   * The layout behavior of the image as the viewport changes size. Defaults to `intrinsic`.\\n   *\\n   * * When `fixed,` the image dimensions will not change as the viewport changes (no responsiveness) similar to the native img element.\\n   * * When `intrinsic`, the image will scale the dimensions down for smaller viewports but maintain the original dimensions for larger viewports.\\n   * * When `responsive`, the image will scale the dimensions down for smaller viewports and scale up for larger viewports.\\n   * * When `fill`, the image will stretch both width and height to the dimensions of the parent element, provided the parent element is relative. This is usually paired with the objectFit property.\\n   */\\n  @Input() layout: ImageLayout = \'intrinsic\';\\n\\n  /**\\n   * A string mapping media queries to device sizes. Defaults to `100vw`.\\n   * We recommend setting sizes when using `layout=\\"responsive\\"` or `layout=\\"fill\\"` and your image will not be the same width as the viewport.\\n   */\\n  @Input() sizes = \'100vw\';\\n\\n  /**\\n   * When true, the image will be considered high priority and preload.\\n   * Should only be used when the image is visible above the fold. Defaults to false.\\n   * Is used only in server-side rendering.\\n   */\\n  @Input() priority = false;\\n\\n  /**\\n   * A placeholder to use while the image is loading in base, possible values are blur or empty. Defaults to `empty`.\\n   *\\n   * When `blur`, the `blurDataURL` property will be used as the placeholder.\\n   * If using server-side rendering then `blurDataURL` will automatically be populated.\\n   *\\n   * When `empty`, there will be no placeholder while the image is loading, only empty space.\\n   */\\n  @Input() placeholder: ImagePlaceholder = \'empty\';\\n\\n  /**\\n   * A Data URL to be used as a placeholder image before the `src` image successfully loads. Only takes effect when combined with `placeholder=\\"blur\\"`.\\n   * Must be a base64-encoded image. It will be enlarged and blurred, so a very small image (10px or less) is recommended. Including larger images as placeholders may harm your application performance.\\n   *\\n   * If not provided inline and the loader supports optimization a small placeholder will be fetched automatically.\\n   */\\n  @Input() blurDataURL?: string;\\n\\n  /**\\n   * When true, the source image will be served as-is instead of changing quality, size, or format. Defaults to `false`.\\n   */\\n  @Input() unoptimized = false;\\n\\n  /**\\n   * The image fit when using `layout=\\"fill\\"`.\\n   */\\n  @Input() objectFit: ObjectFit = \'cover\';\\n\\n  /**\\n   * The image fit when using `layout=\\"fill\\"`.\\n   */\\n  @Input() objectPosition = \'50% 50%\';\\n\\n  /**\\n   * Output emits once the image is completely loaded and the placeholder has been removed.\\n   */\\n  @Output() loadingComplete = new EventEmitter<void>();\\n\\n  get loading(): \'eager\' | \'lazy\' {\\n    return this.priority ? \'eager\' : \'lazy\';\\n  }\\n\\n  get showSizer(): boolean {\\n    return this.layout === \'intrinsic\' || this.layout === \'responsive\';\\n  }\\n\\n  get sizeRatio(): number {\\n    return this.height == null || this.width == null ? 0 : this.height / this.width;\\n  }\\n\\n  get sizerPaddingTop(): string {\\n    return this.layout === \'responsive\' ? `${this.sizeRatio * 100}%` : \'auto\';\\n  }\\n\\n  get wrapperWidth(): string {\\n    return this.layout === \'fixed\' ? `${this.width ?? 0}px` : \'auto\';\\n  }\\n\\n  get wrapperHeight(): string {\\n    return this.layout === \'fixed\' ? `${this.height ?? 0}px` : \'auto\';\\n  }\\n\\n  get blurFilter(): string {\\n    if (this.placeholder === \'blur\' && this.blurDataURL && !this.isImageLoaded) {\\n      return `blur(20px)`;\\n    } else {\\n      return \'none\';\\n    }\\n  }\\n\\n  private readonly ngOnChanges$ = new Subject<void>();\\n  private readonly changes$: Observable<void> = this.ngOnChanges$.pipe(startWith(undefined as void));\\n\\n  readonly sizerSvg$: Observable<SafeUrl | null> = this.changes$.pipe(\\n    map(() => {\\n      if (this.layout !== \'intrinsic\') {\\n        return null;\\n      }\\n\\n      // Create a placeholder svg and convert it to base64\\n      const sizerSvg: string = this.window.btoa(\\n        `<svg width=\\"${this.width}\\" height=\\"${this.height}\\" xmlns=\\"http://www.w3.org/2000/svg\\" version=\\"1.1\\"/>`\\n      );\\n\\n      return this.domSanitizer.bypassSecurityTrustUrl(`data:image/svg+xml;base64,${sizerSvg}`);\\n    })\\n  );\\n\\n  // TODO: Make this reactive based on network\\n  readonly sources$: Observable<ImageSources[]> = this.changes$.pipe(\\n    map(() =>\\n      this.imageLoader.getImageSources({\\n        src: this.src,\\n        width: this.width,\\n        layout: this.layout,\\n        sizes: this.sizes,\\n        unoptimized: this.unoptimized,\\n      })\\n    )\\n  );\\n\\n  readonly blurBackgroundImage$: Observable<string> = this.changes$.pipe(\\n    map(() => {\\n      if (this.placeholder === \'blur\') {\\n        return this.blurDataURL ? `url(\\"${this.blurDataURL}\\")` : `url(\\"${this.imageLoader.getPlaceholderSrc(this.src)}\\")`;\\n      } else {\\n        return \'none\';\\n      }\\n    })\\n  );\\n\\n  readonly isVisible$: Observable<boolean> = this.changes$.pipe(\\n    switchMap(() => this.intersection.isVisible(this.elementRef.nativeElement, this.priority))\\n  );\\n\\n  private isImageLoaded = false;\\n\\n  constructor(\\n    private readonly imageLoader: ImageLoader,\\n    private readonly window: Window,\\n    private readonly domSanitizer: DomSanitizer,\\n    private readonly elementRef: ElementRef,\\n    private readonly intersection: ImageIntersectionObserver\\n  ) {}\\n\\n  ngOnChanges() {\\n    this.validateInputs();\\n    this.ngOnChanges$.next();\\n  }\\n\\n  ngAfterViewInit() {\\n    if (this.image?.nativeElement.complete) {\\n      // In case the image was rendered by SSR and already completed\\n      this.onLoad();\\n    }\\n  }\\n\\n  getImageMime(_: number, { mimeType: mime }: ImageSources) {\\n    return mime;\\n  }\\n\\n  // TODO: fix this being called twice\\n  onLoad() {\\n    if (!this.image) {\\n      return;\\n    }\\n\\n    if (!this.image.nativeElement.src.startsWith(\'data:\')) {\\n      const decodePromise: Promise<void> = \'decode\' in this.image.nativeElement ? this.image.nativeElement.decode() : Promise.resolve();\\n\\n      decodePromise\\n        .catch(() => null)\\n        .then(() => {\\n          this.isImageLoaded = true;\\n          this.loadingComplete.emit();\\n        });\\n    }\\n\\n    if (!isDevMode() || this.layout !== \'intrinsic\') {\\n      return;\\n    }\\n\\n    // Check if the size of the image was OK, can help while developing\\n\\n    const { naturalWidth, naturalHeight } = this.image.nativeElement;\\n\\n    if (this.width != null && this.width != naturalWidth) {\\n      console.warn(`Image with src \\"${this.src}\\" should have \\"width\\" of ${naturalWidth}.`);\\n    }\\n\\n    if (this.height != null && this.height != naturalHeight) {\\n      console.warn(`Image with src \\"${this.src}\\" should have \\"height\\" of ${naturalHeight}.`);\\n    }\\n  }\\n\\n  private validateInputs() {\\n    if (this.src.startsWith(\'data:\')) {\\n      // https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs\\n      this.unoptimized = true;\\n      this.priority = false;\\n    }\\n\\n    if (this.layout !== \'fill\' && (this.width == null || this.height == null || this.width <= 0 || this.height <= 0)) {\\n      throw new Error(`Image with src \\"${this.src}\\" must use \\"width\\" and \\"height\\" properties or \\"layout=\'fill\'\\" property.`);\\n    }\\n\\n    if (!isDevMode()) {\\n      return;\\n    }\\n\\n    if (this.layout === \'fill\' && (this.width != null || this.height != null)) {\\n      console.warn(`Image with src \\"${this.src}\\" and \\"layout=\'fill\'\\" has unused properties assigned. Please remove \\"width\\" and \\"height\\".`);\\n    }\\n\\n    if (this.alt.trim().length === 0) {\\n      console.warn(`Image with src \\"${this.src}\\" must use an \\"alt\\" property.`);\\n    }\\n\\n    if (!this.unoptimized && !this.imageLoader.supportsOptimization) {\\n      console.warn(\\n        `Image with src \\"${this.src}\\" uses a loader that does not implement width. Please implement it or use the \\"unoptimized\\" property instead.`\\n      );\\n    }\\n\\n    if (this.placeholder === \'blur\') {\\n      if (this.layout !== \'fill\' && (this.width ?? 0) * (this.height ?? 0) < 1600) {\\n        console.warn(\\n          `Image with src \\"${this.src}\\" is smaller than 40x40. Consider removing the \\"placeholder=\'blur\'\\" property to improve performance.`\\n        );\\n      }\\n\\n      if (!this.blurDataURL && !this.imageLoader.supportsOptimization) {\\n        console.warn(\\n          `Image with src \\"${this.src}\\" has \\"placeholder=\'blur\'\\" property but is missing the \\"blurDataURL\\" property. ` +\\n            `Placeholder could be fetched from the loader, but it doesn\'t support optimization. ` +\\n            `Please implement it, or pass an inline \\"blurDataURL\\".`\\n        );\\n      }\\n    }\\n  }\\n\\n  // TODO: Implement as a structural directive\\n  // TODO: provide default image loaders https://github.com/vercel/next.js/blob/807d1ec7ef5925a4fa4b93b61ab72a8c5760531b/packages/next/client/image.tsx#L651\\n  // TODO: unit tests\\n  // TODO: in SSR use as background color the predominant one\\n  // TODO: generate blur placeholder in SSR\\n  // TODO: implement priority adding preload to head in SSR\\n}\\n","assetsDirs":[],"styleUrlsData":[{"data":":host {\\n  display: block;\\n  line-height: 0;\\n  font-size: 0;\\n}\\n\\n.wrapper {\\n  display: block;\\n  overflow: hidden;\\n  box-sizing: border-box;\\n  margin: 0;\\n\\n  &--fill {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    bottom: 0;\\n    right: 0;\\n  }\\n\\n  &--responsive {\\n    position: relative;\\n  }\\n\\n  &--intrinsic {\\n    display: inline-block;\\n    max-width: 100%;\\n    position: relative;\\n  }\\n\\n  &--fixed {\\n    display: inline-block;\\n    position: relative;\\n  }\\n\\n  & .sizer {\\n    display: block;\\n    box-sizing: border-box;\\n\\n    &--intrinsic {\\n      max-width: 100%;\\n    }\\n\\n    & .sizer__content {\\n      max-width: 100%;\\n      display: block;\\n      margin: 0;\\n      border: none;\\n      padding: 0;\\n    }\\n  }\\n}\\n\\n.img {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  bottom: 0;\\n  right: 0;\\n\\n  box-sizing: border-box;\\n  padding: 0;\\n  border: none;\\n  margin: auto;\\n\\n  display: block;\\n  width: 0;\\n  height: 0;\\n  min-width: 100%;\\n  max-width: 100%;\\n  min-height: 100%;\\n  max-height: 100%;\\n\\n  // TODO: accessibility don\'t prefer animations friendly\\n  transition: filter 0.1s ease-in-out;\\n}\\n","styleUrl":"image.component.scss"}],"stylesData":"","constructorObj":{"name":"constructor","description":"","deprecated":false,"deprecationMessage":"","args":[{"name":"imageLoader","type":"ImageLoader","deprecated":false,"deprecationMessage":""},{"name":"window","type":"Window","deprecated":false,"deprecationMessage":""},{"name":"domSanitizer","type":"DomSanitizer","deprecated":false,"deprecationMessage":""},{"name":"elementRef","type":"ElementRef","deprecated":false,"deprecationMessage":""},{"name":"intersection","type":"ImageIntersectionObserver","deprecated":false,"deprecationMessage":""}],"line":192,"jsdoctags":[{"name":"imageLoader","type":"ImageLoader","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}},{"name":"window","type":"Window","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}},{"name":"domSanitizer","type":"DomSanitizer","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}},{"name":"elementRef","type":"ElementRef","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}},{"name":"intersection","type":"ImageIntersectionObserver","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}}]},"implements":["OnChanges","AfterViewInit"],"accessors":{"loading":{"name":"loading","getSignature":{"name":"loading","type":"","returnType":"\\"eager\\" | \\"lazy\\"","line":115}},"showSizer":{"name":"showSizer","getSignature":{"name":"showSizer","type":"boolean","returnType":"boolean","line":119}},"sizeRatio":{"name":"sizeRatio","getSignature":{"name":"sizeRatio","type":"number","returnType":"number","line":123}},"sizerPaddingTop":{"name":"sizerPaddingTop","getSignature":{"name":"sizerPaddingTop","type":"string","returnType":"string","line":127}},"wrapperWidth":{"name":"wrapperWidth","getSignature":{"name":"wrapperWidth","type":"string","returnType":"string","line":131}},"wrapperHeight":{"name":"wrapperHeight","getSignature":{"name":"wrapperHeight","type":"string","returnType":"string","line":135}},"blurFilter":{"name":"blurFilter","getSignature":{"name":"blurFilter","type":"string","returnType":"string","line":139}}},"templateData":"<div\\n  class=\\"wrapper wrapper--{{ layout }}\\"\\n  [style.width]=\\"wrapperWidth\\"\\n  [style.height]=\\"wrapperHeight\\"\\n  *ngIf=\\"{ isVisible: isVisible$ | async } as context\\"\\n>\\n  <div class=\\"sizer sizer--{{ layout }}\\" [style.padding-top]=\\"sizerPaddingTop\\" *ngIf=\\"showSizer\\">\\n    <img *ngIf=\\"sizerSvg$ | async as sizerSrc\\" [src]=\\"sizerSrc\\" class=\\"sizer__content\\" aria-hidden=\\"true\\" alt=\\"\\" role=\\"presentation\\" />\\n  </div>\\n  <picture>\\n    <ng-container *ngFor=\\"let source of sources$ | async; let last = last; trackBy: getImageMime\\">\\n      <ng-template #sourceTemplate>\\n        <source [type]=\\"source.mimeType\\" [srcset]=\\"source.srcset\\" [sizes]=\\"sizes\\" />\\n      </ng-template>\\n      <img\\n        #image\\n        *ngIf=\\"last; else sourceTemplate\\"\\n        class=\\"img\\"\\n        [alt]=\\"alt\\"\\n        [attr.loading]=\\"loading\\"\\n        decoding=\\"async\\"\\n        [style.objectFit]=\\"objectFit\\"\\n        [style.objectPosition]=\\"objectPosition\\"\\n        [style.backgroundSize]=\\"objectFit\\"\\n        [style.backgroundPosition]=\\"objectPosition\\"\\n        [style.backgroundImage]=\\"(blurBackgroundImage$ | async) ?? \'none\'\\"\\n        [style.filter]=\\"blurFilter\\"\\n        [srcset]=\\"context.isVisible ? source.srcset : \'\'\\"\\n        [sizes]=\\"context.isVisible ? source.sizes : \'\'\\"\\n        [src]=\\"context.isVisible ? source.src : \'\'\\"\\n        (load)=\\"onLoad()\\"\\n      />\\n    </ng-container>\\n  </picture>\\n</div>\\n"},{"name":"ImageListComponent","id":"component-ImageListComponent-20936a3a77d3ca3c00cd76b29eb81d4d","file":"src/lib/image-list.component.stories.ts","changeDetection":"ChangeDetectionStrategy.OnPush","encapsulation":[],"entryComponents":[],"inputs":[],"outputs":[],"providers":[],"styleUrls":[],"styles":[],"template":"<h2><code>layout=\\"fixed\\"</code></h2>\\n<image\\n  src=\\"https://assets.imgix.net/unsplash/bear.jpg\\"\\n  alt=\\"Bear\\"\\n  [width]=\\"1080\\"\\n  [height]=\\"720\\"\\n  layout=\\"fixed\\"\\n  placeholder=\\"blur\\"\\n></image>\\n\\n<h2><code>layout=\\"intrinsic\\"</code></h2>\\n<image\\n  src=\\"https://assets.imgix.net/examples/kingfisher.jpg\\"\\n  alt=\\"Kingfisher\\"\\n  [width]=\\"3840\\"\\n  [height]=\\"2560\\"\\n  layout=\\"intrinsic\\"\\n  placeholder=\\"blur\\"\\n></image>\\n\\n<h2><code>layout=\\"responsive\\"</code></h2>\\n<image\\n  src=\\"https://assets.imgix.net/unsplash/transport.jpg\\"\\n  alt=\\"Transport\\"\\n  [width]=\\"3600\\"\\n  [height]=\\"2400\\"\\n  layout=\\"responsive\\"\\n  placeholder=\\"blur\\"\\n></image>\\n\\n<h2><code>layout=\\"fill\\"</code></h2>\\n<div style=\\"width: 100%; height: 250px; position: relative\\">\\n  <image src=\\"https://assets.imgix.net/unsplash/bridge.jpg\\" alt=\\"Bridge\\" layout=\\"fill\\" placeholder=\\"blur\\"></image>\\n</div>\\n","templateUrl":[],"viewProviders":[],"inputsClass":[],"outputsClass":[],"propertiesClass":[],"methodsClass":[],"deprecated":false,"deprecationMessage":"","hostBindings":[],"hostListeners":[],"description":"","rawdescription":"\\n","type":"component","sourceCode":"import { Component, ChangeDetectionStrategy, NgModule } from \'@angular/core\';\\nimport { moduleMetadata, Meta, Story } from \'@storybook/angular\';\\n\\nimport { ImageComponent } from \'./component\';\\nimport { ImageModule } from \'./image.module\';\\n\\n@Component({\\n  template: `\\n    <h2><code>layout=\\"fixed\\"</code></h2>\\n    <image\\n      src=\\"https://assets.imgix.net/unsplash/bear.jpg\\"\\n      alt=\\"Bear\\"\\n      [width]=\\"1080\\"\\n      [height]=\\"720\\"\\n      layout=\\"fixed\\"\\n      placeholder=\\"blur\\"\\n    ></image>\\n\\n    <h2><code>layout=\\"intrinsic\\"</code></h2>\\n    <image\\n      src=\\"https://assets.imgix.net/examples/kingfisher.jpg\\"\\n      alt=\\"Kingfisher\\"\\n      [width]=\\"3840\\"\\n      [height]=\\"2560\\"\\n      layout=\\"intrinsic\\"\\n      placeholder=\\"blur\\"\\n    ></image>\\n\\n    <h2><code>layout=\\"responsive\\"</code></h2>\\n    <image\\n      src=\\"https://assets.imgix.net/unsplash/transport.jpg\\"\\n      alt=\\"Transport\\"\\n      [width]=\\"3600\\"\\n      [height]=\\"2400\\"\\n      layout=\\"responsive\\"\\n      placeholder=\\"blur\\"\\n    ></image>\\n\\n    <h2><code>layout=\\"fill\\"</code></h2>\\n    <div style=\\"width: 100%; height: 250px; position: relative\\">\\n      <image src=\\"https://assets.imgix.net/unsplash/bridge.jpg\\" alt=\\"Bridge\\" layout=\\"fill\\" placeholder=\\"blur\\"></image>\\n    </div>\\n  `,\\n  changeDetection: ChangeDetectionStrategy.OnPush,\\n})\\nclass ImageListComponent {}\\n\\n@NgModule({\\n  imports: [ImageModule],\\n  declarations: [ImageListComponent],\\n  exports: [ImageListComponent],\\n})\\nclass ImageListModule {}\\n\\nexport default {\\n  title: \'Image\',\\n  component: ImageListComponent,\\n  decorators: [\\n    moduleMetadata({\\n      imports: [ImageModule.forRoot({}), ImageListModule],\\n    }),\\n  ],\\n  parameters: {\\n    controls: { include: [] },\\n    // TODO: https://github.com/storybookjs/storybook/issues/7149\\n    // options: { showPanel: false },\\n  },\\n} as Meta<ImageComponent>;\\n\\nconst Template: Story<ImageListComponent> = (args: ImageListComponent) => ({\\n  component: ImageListComponent,\\n  props: args,\\n});\\n\\nexport const Example = Template.bind({});\\nExample.args = {};\\n","assetsDirs":[],"styleUrlsData":"","stylesData":""}],"modules":[{"name":"ImageListModule","id":"module-ImageListModule-20936a3a77d3ca3c00cd76b29eb81d4d","description":"","deprecationMessage":"","deprecated":false,"file":"src/lib/image-list.component.stories.ts","methods":[],"sourceCode":"import { Component, ChangeDetectionStrategy, NgModule } from \'@angular/core\';\\nimport { moduleMetadata, Meta, Story } from \'@storybook/angular\';\\n\\nimport { ImageComponent } from \'./component\';\\nimport { ImageModule } from \'./image.module\';\\n\\n@Component({\\n  template: `\\n    <h2><code>layout=\\"fixed\\"</code></h2>\\n    <image\\n      src=\\"https://assets.imgix.net/unsplash/bear.jpg\\"\\n      alt=\\"Bear\\"\\n      [width]=\\"1080\\"\\n      [height]=\\"720\\"\\n      layout=\\"fixed\\"\\n      placeholder=\\"blur\\"\\n    ></image>\\n\\n    <h2><code>layout=\\"intrinsic\\"</code></h2>\\n    <image\\n      src=\\"https://assets.imgix.net/examples/kingfisher.jpg\\"\\n      alt=\\"Kingfisher\\"\\n      [width]=\\"3840\\"\\n      [height]=\\"2560\\"\\n      layout=\\"intrinsic\\"\\n      placeholder=\\"blur\\"\\n    ></image>\\n\\n    <h2><code>layout=\\"responsive\\"</code></h2>\\n    <image\\n      src=\\"https://assets.imgix.net/unsplash/transport.jpg\\"\\n      alt=\\"Transport\\"\\n      [width]=\\"3600\\"\\n      [height]=\\"2400\\"\\n      layout=\\"responsive\\"\\n      placeholder=\\"blur\\"\\n    ></image>\\n\\n    <h2><code>layout=\\"fill\\"</code></h2>\\n    <div style=\\"width: 100%; height: 250px; position: relative\\">\\n      <image src=\\"https://assets.imgix.net/unsplash/bridge.jpg\\" alt=\\"Bridge\\" layout=\\"fill\\" placeholder=\\"blur\\"></image>\\n    </div>\\n  `,\\n  changeDetection: ChangeDetectionStrategy.OnPush,\\n})\\nclass ImageListComponent {}\\n\\n@NgModule({\\n  imports: [ImageModule],\\n  declarations: [ImageListComponent],\\n  exports: [ImageListComponent],\\n})\\nclass ImageListModule {}\\n\\nexport default {\\n  title: \'Image\',\\n  component: ImageListComponent,\\n  decorators: [\\n    moduleMetadata({\\n      imports: [ImageModule.forRoot({}), ImageListModule],\\n    }),\\n  ],\\n  parameters: {\\n    controls: { include: [] },\\n    // TODO: https://github.com/storybookjs/storybook/issues/7149\\n    // options: { showPanel: false },\\n  },\\n} as Meta<ImageComponent>;\\n\\nconst Template: Story<ImageListComponent> = (args: ImageListComponent) => ({\\n  component: ImageListComponent,\\n  props: args,\\n});\\n\\nexport const Example = Template.bind({});\\nExample.args = {};\\n","children":[{"type":"providers","elements":[]},{"type":"declarations","elements":[{"name":"ImageListComponent"}]},{"type":"imports","elements":[{"name":"ImageModule"}]},{"type":"exports","elements":[{"name":"ImageListComponent"}]},{"type":"bootstrap","elements":[]},{"type":"classes","elements":[]}]},{"name":"ImageModule","id":"module-ImageModule-052fa6c11601e6b93afea584050a2f50","description":"","deprecationMessage":"","deprecated":false,"file":"src/lib/image.module.ts","methods":[{"name":"forRoot","args":[{"type":"ImageModuleConfig","deprecated":false,"deprecationMessage":""}],"optional":false,"returnType":"ModuleWithProviders<ImageModule>","typeParameters":[],"line":20,"deprecated":false,"deprecationMessage":"","modifierKind":[123],"jsdoctags":[{"type":"ImageModuleConfig","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}}]}],"sourceCode":"import { CommonModule } from \'@angular/common\';\\nimport { ModuleWithProviders, NgModule } from \'@angular/core\';\\n\\nimport { defaultImageOptimizerConfig, ImageOptimizerConfig } from \'@ng-easy/image-config\';\\n\\nimport { ImageComponent } from \'./component\';\\nimport { DefaultImageLoader, ImageLoader } from \'./services\';\\nimport { IMAGE_OPTIMIZER_CONFIG } from \'./tokens\';\\n\\nexport interface ImageModuleConfig {\\n  imageOptimizerConfig?: ImageOptimizerConfig;\\n}\\n\\n@NgModule({\\n  declarations: [ImageComponent],\\n  imports: [CommonModule],\\n  exports: [ImageComponent],\\n})\\nexport class ImageModule {\\n  static forRoot({ imageOptimizerConfig }: ImageModuleConfig): ModuleWithProviders<ImageModule> {\\n    return {\\n      ngModule: ImageModule,\\n      providers: [\\n        { provide: ImageLoader, useClass: DefaultImageLoader },\\n        { provide: IMAGE_OPTIMIZER_CONFIG, useValue: imageOptimizerConfig ?? defaultImageOptimizerConfig },\\n        { provide: Window, useValue: window },\\n      ],\\n    };\\n  }\\n}\\n","children":[{"type":"providers","elements":[]},{"type":"declarations","elements":[{"name":"ImageComponent"}]},{"type":"imports","elements":[]},{"type":"exports","elements":[{"name":"ImageComponent"}]},{"type":"bootstrap","elements":[]},{"type":"classes","elements":[]}]}],"miscellaneous":{"variables":[{"name":"Example","ctype":"miscellaneous","subtype":"variable","file":"src/lib/image-list.component.stories.ts","deprecated":false,"deprecationMessage":"","type":"","defaultValue":"Template.bind({})"},{"name":"Fill","ctype":"miscellaneous","subtype":"variable","file":"src/lib/image.component.stories.ts","deprecated":false,"deprecationMessage":"","type":"","defaultValue":"Template.bind({})"},{"name":"Fixed","ctype":"miscellaneous","subtype":"variable","file":"src/lib/image.component.stories.ts","deprecated":false,"deprecationMessage":"","type":"","defaultValue":"Template.bind({})"},{"name":"IMAGE_OPTIMIZER_CONFIG","ctype":"miscellaneous","subtype":"variable","file":"src/lib/tokens/image-optimizer-config.ts","deprecated":false,"deprecationMessage":"","type":"","defaultValue":"new InjectionToken<ImageOptimizerConfig>(\'@ng-easy/image:image-optimizer-config\')"},{"name":"Intrinsic","ctype":"miscellaneous","subtype":"variable","file":"src/lib/image.component.stories.ts","deprecated":false,"deprecationMessage":"","type":"","defaultValue":"Template.bind({})"},{"name":"placeholderQuality","ctype":"miscellaneous","subtype":"variable","file":"src/lib/services/image-loader.ts","deprecated":false,"deprecationMessage":"","type":"number","defaultValue":"15"},{"name":"placeholderWidth","ctype":"miscellaneous","subtype":"variable","file":"src/lib/services/image-loader.ts","deprecated":false,"deprecationMessage":"","type":"number","defaultValue":"15"},{"name":"preferredOptimizedFormats","ctype":"miscellaneous","subtype":"variable","file":"src/lib/services/image-loader.ts","deprecated":false,"deprecationMessage":"","type":"ImageFormat[]","defaultValue":"[ImageFormat.Webp, ImageFormat.Avif, ImageFormat.Heif, ImageFormat.Jpeg] as const"},{"name":"randomWidth","ctype":"miscellaneous","subtype":"variable","file":"src/lib/services/image-loader.ts","deprecated":false,"deprecationMessage":"","type":"number","defaultValue":"Math.floor(Math.random() * 1000) + 100"},{"name":"Responsive","ctype":"miscellaneous","subtype":"variable","file":"src/lib/image.component.stories.ts","deprecated":false,"deprecationMessage":"","type":"","defaultValue":"Template.bind({})"},{"name":"Template","ctype":"miscellaneous","subtype":"variable","file":"src/lib/image-list.component.stories.ts","deprecated":false,"deprecationMessage":"","type":"Story<ImageListComponent>","defaultValue":"(args: ImageListComponent) => ({\\n  component: ImageListComponent,\\n  props: args,\\n})"},{"name":"Template","ctype":"miscellaneous","subtype":"variable","file":"src/lib/image.component.stories.ts","deprecated":false,"deprecationMessage":"","type":"Story<ImageComponent>","defaultValue":"(args: ImageComponent) => ({\\n  component: ImageComponent,\\n  props: args,\\n})"},{"name":"viewportWidthRe","ctype":"miscellaneous","subtype":"variable","file":"src/lib/services/image-loader.ts","deprecated":false,"deprecationMessage":"","type":"","defaultValue":"/(^|\\\\s)(1?\\\\d?\\\\d)vw/g"}],"functions":[{"name":"getQuality","file":"src/lib/functions/image-quality.ts","ctype":"miscellaneous","subtype":"function","deprecated":false,"deprecationMessage":"","description":"","args":[{"name":"configQuality","deprecated":false,"deprecationMessage":""}],"returnType":"number","jsdoctags":[{"name":"configQuality","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}}]}],"typealiases":[{"name":"ImageLayout","ctype":"miscellaneous","subtype":"typealias","rawtype":"\\"fixed\\" | \\"intrinsic\\" | \\"responsive\\" | \\"fill\\"","file":"src/lib/models/image-layout.ts","deprecated":false,"deprecationMessage":"","description":"<p>The layout behavior of the image as the viewport changes size. Defaults to <code>intrinsic</code>.</p>\\n<ul>\\n<li>When <code>fixed,</code> the image dimensions will not change as the viewport changes (no responsiveness) similar to the native img element.</li>\\n<li>When <code>intrinsic</code>, the image will scale the dimensions down for smaller viewports but maintain the original dimensions for larger viewports.</li>\\n<li>When <code>responsive</code>, the image will scale the dimensions down for smaller viewports and scale up for larger viewports.</li>\\n<li>When <code>fill</code>, the image will stretch both width and height to the dimensions of the parent element, provided the parent element is relative. This is usually paired with the objectFit property.</li>\\n</ul>\\n","kind":183},{"name":"ImagePlaceholder","ctype":"miscellaneous","subtype":"typealias","rawtype":"\\"empty\\" | \\"blur\\"","file":"src/lib/models/image-placeholder.ts","deprecated":false,"deprecationMessage":"","description":"","kind":183},{"name":"ObjectFit","ctype":"miscellaneous","subtype":"typealias","rawtype":"\\"contain\\" | \\"cover\\" | \\"fill\\" | \\"none\\" | \\"scale-down\\"","file":"src/lib/models/object-fit.ts","deprecated":false,"deprecationMessage":"","description":"","kind":183}],"enumerations":[],"groupedVariables":{"src/lib/image-list.component.stories.ts":[{"name":"Example","ctype":"miscellaneous","subtype":"variable","file":"src/lib/image-list.component.stories.ts","deprecated":false,"deprecationMessage":"","type":"","defaultValue":"Template.bind({})"},{"name":"Template","ctype":"miscellaneous","subtype":"variable","file":"src/lib/image-list.component.stories.ts","deprecated":false,"deprecationMessage":"","type":"Story<ImageListComponent>","defaultValue":"(args: ImageListComponent) => ({\\n  component: ImageListComponent,\\n  props: args,\\n})"}],"src/lib/image.component.stories.ts":[{"name":"Fill","ctype":"miscellaneous","subtype":"variable","file":"src/lib/image.component.stories.ts","deprecated":false,"deprecationMessage":"","type":"","defaultValue":"Template.bind({})"},{"name":"Fixed","ctype":"miscellaneous","subtype":"variable","file":"src/lib/image.component.stories.ts","deprecated":false,"deprecationMessage":"","type":"","defaultValue":"Template.bind({})"},{"name":"Intrinsic","ctype":"miscellaneous","subtype":"variable","file":"src/lib/image.component.stories.ts","deprecated":false,"deprecationMessage":"","type":"","defaultValue":"Template.bind({})"},{"name":"Responsive","ctype":"miscellaneous","subtype":"variable","file":"src/lib/image.component.stories.ts","deprecated":false,"deprecationMessage":"","type":"","defaultValue":"Template.bind({})"},{"name":"Template","ctype":"miscellaneous","subtype":"variable","file":"src/lib/image.component.stories.ts","deprecated":false,"deprecationMessage":"","type":"Story<ImageComponent>","defaultValue":"(args: ImageComponent) => ({\\n  component: ImageComponent,\\n  props: args,\\n})"}],"src/lib/tokens/image-optimizer-config.ts":[{"name":"IMAGE_OPTIMIZER_CONFIG","ctype":"miscellaneous","subtype":"variable","file":"src/lib/tokens/image-optimizer-config.ts","deprecated":false,"deprecationMessage":"","type":"","defaultValue":"new InjectionToken<ImageOptimizerConfig>(\'@ng-easy/image:image-optimizer-config\')"}],"src/lib/services/image-loader.ts":[{"name":"placeholderQuality","ctype":"miscellaneous","subtype":"variable","file":"src/lib/services/image-loader.ts","deprecated":false,"deprecationMessage":"","type":"number","defaultValue":"15"},{"name":"placeholderWidth","ctype":"miscellaneous","subtype":"variable","file":"src/lib/services/image-loader.ts","deprecated":false,"deprecationMessage":"","type":"number","defaultValue":"15"},{"name":"preferredOptimizedFormats","ctype":"miscellaneous","subtype":"variable","file":"src/lib/services/image-loader.ts","deprecated":false,"deprecationMessage":"","type":"ImageFormat[]","defaultValue":"[ImageFormat.Webp, ImageFormat.Avif, ImageFormat.Heif, ImageFormat.Jpeg] as const"},{"name":"randomWidth","ctype":"miscellaneous","subtype":"variable","file":"src/lib/services/image-loader.ts","deprecated":false,"deprecationMessage":"","type":"number","defaultValue":"Math.floor(Math.random() * 1000) + 100"},{"name":"viewportWidthRe","ctype":"miscellaneous","subtype":"variable","file":"src/lib/services/image-loader.ts","deprecated":false,"deprecationMessage":"","type":"","defaultValue":"/(^|\\\\s)(1?\\\\d?\\\\d)vw/g"}]},"groupedFunctions":{"src/lib/functions/image-quality.ts":[{"name":"getQuality","file":"src/lib/functions/image-quality.ts","ctype":"miscellaneous","subtype":"function","deprecated":false,"deprecationMessage":"","description":"","args":[{"name":"configQuality","deprecated":false,"deprecationMessage":""}],"returnType":"number","jsdoctags":[{"name":"configQuality","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}}]}]},"groupedEnumerations":{},"groupedTypeAliases":{"src/lib/models/image-layout.ts":[{"name":"ImageLayout","ctype":"miscellaneous","subtype":"typealias","rawtype":"\\"fixed\\" | \\"intrinsic\\" | \\"responsive\\" | \\"fill\\"","file":"src/lib/models/image-layout.ts","deprecated":false,"deprecationMessage":"","description":"<p>The layout behavior of the image as the viewport changes size. Defaults to <code>intrinsic</code>.</p>\\n<ul>\\n<li>When <code>fixed,</code> the image dimensions will not change as the viewport changes (no responsiveness) similar to the native img element.</li>\\n<li>When <code>intrinsic</code>, the image will scale the dimensions down for smaller viewports but maintain the original dimensions for larger viewports.</li>\\n<li>When <code>responsive</code>, the image will scale the dimensions down for smaller viewports and scale up for larger viewports.</li>\\n<li>When <code>fill</code>, the image will stretch both width and height to the dimensions of the parent element, provided the parent element is relative. This is usually paired with the objectFit property.</li>\\n</ul>\\n","kind":183}],"src/lib/models/image-placeholder.ts":[{"name":"ImagePlaceholder","ctype":"miscellaneous","subtype":"typealias","rawtype":"\\"empty\\" | \\"blur\\"","file":"src/lib/models/image-placeholder.ts","deprecated":false,"deprecationMessage":"","description":"","kind":183}],"src/lib/models/object-fit.ts":[{"name":"ObjectFit","ctype":"miscellaneous","subtype":"typealias","rawtype":"\\"contain\\" | \\"cover\\" | \\"fill\\" | \\"none\\" | \\"scale-down\\"","file":"src/lib/models/object-fit.ts","deprecated":false,"deprecationMessage":"","description":"","kind":183}]}}}');var parameters={controls:{expanded:!0}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(0,angular.setCompodocJson)(documentation_namespaceObject),Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.kg.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return(0,client_api.$9)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return(0,client_api.HZ)(loader,!1)}));case"parameters":return(0,client_api.h1)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return(0,client_api.My)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return(0,client_api._C)(enhancer)}));case"render":return(0,client_api.$P)(value);case"globals":case"globalTypes":var v={};return v[key]=value,(0,client_api.h1)(v,!1);default:return console.log(key+" was not supported :( !")}}))},43106:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__(70001)},21118:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__='<div\n  class="wrapper wrapper--{{ layout }}"\n  [style.width]="wrapperWidth"\n  [style.height]="wrapperHeight"\n  *ngIf="{ isVisible: isVisible$ | async } as context"\n>\n  <div class="sizer sizer--{{ layout }}" [style.padding-top]="sizerPaddingTop" *ngIf="showSizer">\n    <img *ngIf="sizerSvg$ | async as sizerSrc" [src]="sizerSrc" class="sizer__content" aria-hidden="true" alt="" role="presentation" />\n  </div>\n  <picture>\n    <ng-container *ngFor="let source of sources$ | async; let last = last; trackBy: getImageMime">\n      <ng-template #sourceTemplate>\n        <source [type]="source.mimeType" [srcset]="source.srcset" [sizes]="sizes" />\n      </ng-template>\n      <img\n        #image\n        *ngIf="last; else sourceTemplate"\n        class="img"\n        [alt]="alt"\n        [attr.loading]="loading"\n        decoding="async"\n        [style.objectFit]="objectFit"\n        [style.objectPosition]="objectPosition"\n        [style.backgroundSize]="objectFit"\n        [style.backgroundPosition]="objectPosition"\n        [style.backgroundImage]="(blurBackgroundImage$ | async) ?? \'none\'"\n        [style.filter]="blurFilter"\n        [srcset]="context.isVisible ? source.srcset : \'\'"\n        [sizes]="context.isVisible ? source.sizes : \'\'"\n        [src]="context.isVisible ? source.src : \'\'"\n        (load)="onLoad()"\n      />\n    </ng-container>\n  </picture>\n</div>\n'},14909:module=>{"use strict";module.exports=":host {\n  display: block;\n  line-height: 0;\n  font-size: 0;\n}\n\n.wrapper {\n  display: block;\n  overflow: hidden;\n  box-sizing: border-box;\n  margin: 0;\n}\n\n.wrapper--fill {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n}\n\n.wrapper--responsive {\n  position: relative;\n}\n\n.wrapper--intrinsic {\n  display: inline-block;\n  max-width: 100%;\n  position: relative;\n}\n\n.wrapper--fixed {\n  display: inline-block;\n  position: relative;\n}\n\n.wrapper .sizer {\n  display: block;\n  box-sizing: border-box;\n}\n\n.wrapper .sizer--intrinsic {\n  max-width: 100%;\n}\n\n.wrapper .sizer .sizer__content {\n  max-width: 100%;\n  display: block;\n  margin: 0;\n  border: none;\n  padding: 0;\n}\n\n.img {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  box-sizing: border-box;\n  padding: 0;\n  border: none;\n  margin: auto;\n  display: block;\n  width: 0;\n  height: 0;\n  min-width: 100%;\n  max-width: 100%;\n  min-height: 100%;\n  max-height: 100%;\n  transition: filter 0.1s ease-in-out;\n}"},21177:()=>{},24654:()=>{},4147:module=>{"use strict";module.exports={i8:"0.0.0"}}},__webpack_require__=>{var __webpack_exec__=moduleId=>__webpack_require__(__webpack_require__.s=moduleId);__webpack_require__.O(0,[540],(()=>(__webpack_exec__(37707),__webpack_exec__(99669),__webpack_exec__(43106),__webpack_exec__(17119),__webpack_exec__(26432),__webpack_exec__(84873),__webpack_exec__(62853),__webpack_exec__(81953),__webpack_exec__(22609),__webpack_exec__(64049),__webpack_exec__(21424),__webpack_exec__(57445),__webpack_exec__(76871),__webpack_exec__(31809),__webpack_exec__(11417))));__webpack_require__.O()}]);